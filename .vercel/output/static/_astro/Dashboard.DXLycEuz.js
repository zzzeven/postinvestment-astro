import{c as W,j as i,b as Q,B as oe,d as Yi,a as Ji,u as Nn,C as Yr,e as Zi,f as ea,h as Jr,i as ta,k as na,l as ra,m as Ge,r as Zr,n as G,R as oa}from"./use-toast.DWCV5Vtc.js";import{r as l,R as eo,a as je}from"./index.Cq7c7tEH.js";/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ia=W("calendar",sa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ca=W("check",aa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ua=W("chevron-down",la);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],to=W("chevron-right",da);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ar=W("circle-alert",fa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mn=W("circle-check",pa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cr=W("circle-x",ma);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ga=W("circle",ha);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],va=W("clock",xa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],wa=W("file-pen",ya);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rt=W("file-text",ba);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],lr=W("file",Sa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Pa=W("folder-open",Ca);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Et=W("folder",Na);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_a=W("house",Ea);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ur=W("loader-circle",Ra);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Da=W("log-out",Ta);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],no=W("menu",Aa);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ia=W("message-circle",ja);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Oa=W("refresh-cw",Ma);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fa=W("search",La);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$a=W("settings",ka);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],tt=W("sparkles",Ba);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],za=W("tag",Va);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Wa=W("trash-2",Ua);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ot=W("upload",Ha);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qa=W("users",Ka);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],En=W("x",Ga),S=Symbol.for("drizzle:entityKind");function te(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,S))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(S in n&&n[S]===t[S])return!0;n=Object.getPrototypeOf(n)}return!1}class _n{constructor(t,n){this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[S]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Qa{static[S]="ColumnBuilder";config;constructor(t,n,r){this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}const Ve=Symbol.for("drizzle:Name");class Xa{static[S]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(t,n){this.reference=()=>{const{name:r,columns:o,foreignColumns:s}=t();return{name:r,columns:o,foreignTable:s[0].table,foreignColumns:s}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new Ya(t,this)}}class Ya{constructor(t,n){this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[S]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:t,columns:n,foreignColumns:r}=this.reference(),o=n.map(c=>c.name),s=r.map(c=>c.name),a=[this.table[Ve],...o,r[0].table[Ve],...s];return t??`${a.join("_")}_fk`}}function Ja(e,...t){return e(...t)}function Za(e,t){return`${e[Ve]}_${t.join("_")}_unique`}function dr(e,t,n){for(let r=t;r<e.length;r++){const o=e[r];if(o==="\\"){r++;continue}if(o==='"')return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(o===","||o==="}"))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}function ro(e,t=0){const n=[];let r=t,o=!1;for(;r<e.length;){const s=e[r];if(s===","){(o||r===t)&&n.push(""),o=!0,r++;continue}if(o=!1,s==="\\"){r+=2;continue}if(s==='"'){const[u,f]=dr(e,r+1,!0);n.push(u),r=f;continue}if(s==="}")return[n,r+1];if(s==="{"){const[u,f]=ro(e,r+1);n.push(u),r=f;continue}const[a,c]=dr(e,r,!1);n.push(a),r=c}return[n,r]}function ec(e){const[t]=ro(e,1);return t}function oo(e){return`{${e.map(t=>Array.isArray(t)?oo(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}class B extends Qa{foreignKeyConfigs=[];static[S]="PgColumnBuilder";array(t){return new nc(this.config.name,this,t)}references(t,n={}){return this.foreignKeyConfigs.push({ref:t,actions:n}),this}unique(t,n){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,n){return this.foreignKeyConfigs.map(({ref:r,actions:o})=>Ja((s,a)=>{const c=new Xa(()=>{const u=s();return{columns:[t],foreignColumns:[u]}});return a.onUpdate&&c.onUpdate(a.onUpdate),a.onDelete&&c.onDelete(a.onDelete),c.build(n)},r,o))}buildExtraConfigColumn(t){return new tc(t,this.config)}}class L extends _n{constructor(t,n){n.uniqueName||(n.uniqueName=Za(t,[n.name])),super(t,n),this.table=t}static[S]="PgColumn"}class tc extends L{static[S]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}class Yt{static[S]="IndexedColumn";constructor(t,n,r,o){this.name=t,this.keyAsName=n,this.type=r,this.indexConfig=o}name;keyAsName;type;indexConfig}class nc extends B{static[S]="PgArrayBuilder";constructor(t,n,r){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(t){const n=this.config.baseBuilder.build(t);return new Rn(t,this.config,n)}}class Rn extends L{constructor(t,n,r,o){super(t,n),this.baseColumn=r,this.range=o,this.size=n.size}size;static[S]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=ec(t)),t.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(t,n=!1){const r=t.map(o=>o===null?null:te(this.baseColumn,Rn)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return n?r:oo(r)}}const fr=Symbol.for("drizzle:isPgEnum");function rc(e){return!!e&&typeof e=="function"&&fr in e&&e[fr]===!0}class so{static[S]="Subquery";constructor(t,n,r,o=!1,s=[]){this._={brand:"Subquery",sql:t,selectedFields:n,alias:r,isWith:o,usedTables:s}}}const oc={startActiveSpan(e,t){return t()}},nt=Symbol.for("drizzle:ViewBaseConfig"),Jt=Symbol.for("drizzle:Schema"),pr=Symbol.for("drizzle:Columns"),mr=Symbol.for("drizzle:ExtraConfigColumns"),Zt=Symbol.for("drizzle:OriginalName"),en=Symbol.for("drizzle:BaseName"),_t=Symbol.for("drizzle:IsAlias"),hr=Symbol.for("drizzle:ExtraConfigBuilder"),sc=Symbol.for("drizzle:IsDrizzleTable");class ne{static[S]="Table";static Symbol={Name:Ve,Schema:Jt,OriginalName:Zt,Columns:pr,ExtraConfigColumns:mr,BaseName:en,IsAlias:_t,ExtraConfigBuilder:hr};[Ve];[Zt];[Jt];[pr];[mr];[en];[_t]=!1;[sc]=!0;[hr]=void 0;constructor(t,n,r){this[Ve]=this[Zt]=t,this[Jt]=n,this[en]=r}}function ic(e){return e!=null&&typeof e.getSQL=="function"}function ac(e){const t={sql:"",params:[]};for(const n of e)t.sql+=n.sql,t.params.push(...n.params),n.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}class fe{static[S]="StringChunk";value;constructor(t){this.value=Array.isArray(t)?t:[t]}getSQL(){return new q([this])}}class q{constructor(t){this.queryChunks=t;for(const n of t)if(te(n,ne)){const r=n[ne.Symbol.Schema];this.usedTables.push(r===void 0?n[ne.Symbol.Name]:r+"."+n[ne.Symbol.Name])}}static[S]="SQL";decoder=io;shouldInlineParams=!1;usedTables=[];append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return oc.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,t);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:o,escapeName:s,escapeParam:a,prepareTyping:c,inlineParams:u,paramStartIndex:f}=r;return ac(t.map(d=>{if(te(d,fe))return{sql:d.value.join(""),params:[]};if(te(d,hn))return{sql:s(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const p=[new fe("(")];for(const[m,h]of d.entries())p.push(h),m<d.length-1&&p.push(new fe(", "));return p.push(new fe(")")),this.buildQueryFromSourceParams(p,r)}if(te(d,q))return this.buildQueryFromSourceParams(d.queryChunks,{...r,inlineParams:u||d.shouldInlineParams});if(te(d,ne)){const p=d[ne.Symbol.Schema],m=d[ne.Symbol.Name];return{sql:p===void 0||d[_t]?s(m):s(p)+"."+s(m),params:[]}}if(te(d,_n)){const p=o.getColumnCasing(d);if(n.invokeSource==="indexes")return{sql:s(p),params:[]};const m=d.table[ne.Symbol.Schema];return{sql:d.table[_t]||m===void 0?s(d.table[ne.Symbol.Name])+"."+s(p):s(m)+"."+s(d.table[ne.Symbol.Name])+"."+s(p),params:[]}}if(te(d,lc)){const p=d[nt].schema,m=d[nt].name;return{sql:p===void 0||d[nt].isAlias?s(m):s(p)+"."+s(m),params:[]}}if(te(d,co)){if(te(d.value,gn))return{sql:a(f.value++,d),params:[d],typings:["none"]};const p=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(te(p,q))return this.buildQueryFromSourceParams([p],r);if(u)return{sql:this.mapInlineParam(p,r),params:[]};let m=["none"];return c&&(m=[c(d.encoder)]),{sql:a(f.value++,p),params:[p],typings:m}}return te(d,gn)?{sql:a(f.value++,d),params:[d],typings:["none"]}:te(d,q.Aliased)&&d.fieldAlias!==void 0?{sql:s(d.fieldAlias),params:[]}:te(d,so)?d._.isWith?{sql:s(d._.alias),params:[]}:this.buildQueryFromSourceParams([new fe("("),d._.sql,new fe(") "),new hn(d._.alias)],r):rc(d)?d.schema?{sql:s(d.schema)+"."+s(d.enumName),params:[]}:{sql:s(d.enumName),params:[]}:ic(d)?d.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([d.getSQL()],r):this.buildQueryFromSourceParams([new fe("("),d.getSQL(),new fe(")")],r):u?{sql:this.mapInlineParam(d,r),params:[]}:{sql:a(f.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const r=t.toString();return n(r==="[object Object]"?JSON.stringify(t):r)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new q.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}}class hn{constructor(t){this.value=t}static[S]="Name";brand;getSQL(){return new q([this])}}const io={mapFromDriverValue:e=>e},ao={mapToDriverValue:e=>e};({...io,...ao});class co{constructor(t,n=ao){this.value=t,this.encoder=n}static[S]="Param";brand;getSQL(){return new q([this])}}function Rt(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new fe(e[0]));for(const[r,o]of t.entries())n.push(o,new fe(e[r+1]));return new q(n)}(e=>{function t(){return new q([])}e.empty=t;function n(u){return new q(u)}e.fromList=n;function r(u){return new q([new fe(u)])}e.raw=r;function o(u,f){const d=[];for(const[p,m]of u.entries())p>0&&f!==void 0&&d.push(f),d.push(m);return new q(d)}e.join=o;function s(u){return new hn(u)}e.identifier=s;function a(u){return new gn(u)}e.placeholder=a;function c(u,f){return new co(u,f)}e.param=c})(Rt||(Rt={}));(e=>{class t{constructor(r,o){this.sql=r,this.fieldAlias=o}static[S]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(q||(q={}));class gn{constructor(t){this.name=t}static[S]="Placeholder";getSQL(){return new q([this])}}const cc=Symbol.for("drizzle:IsDrizzleView");class lc{static[S]="View";[nt];[cc]=!0;constructor({name:t,schema:n,selectedFields:r,query:o}){this[nt]={name:t,originalName:t,schema:n,selectedFields:r,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new q([this])}}_n.prototype.getSQL=function(){return new q([this])};ne.prototype.getSQL=function(){return new q([this])};so.prototype.getSQL=function(){return new q([this])};function Z(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}typeof TextDecoder>"u"||new TextDecoder;class $t extends B{static[S]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class uc extends $t{static[S]="PgBigInt53Builder";constructor(t){super(t,"number","PgBigInt53")}build(t){return new dc(t,this.config)}}class dc extends L{static[S]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}class fc extends $t{static[S]="PgBigInt64Builder";constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new pc(t,this.config)}}class pc extends L{static[S]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}function lo(e,t){const{name:n,config:r}=Z(e,t);return r.mode==="number"?new uc(n):new fc(n)}class mc extends B{static[S]="PgBigSerial53Builder";constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new hc(t,this.config)}}class hc extends L{static[S]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}class gc extends B{static[S]="PgBigSerial64Builder";constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new xc(t,this.config)}}class xc extends L{static[S]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}function vc(e,t){const{name:n,config:r}=Z(e,t);return r.mode==="number"?new mc(n):new gc(n)}class yc extends B{static[S]="PgBooleanBuilder";constructor(t){super(t,"boolean","PgBoolean")}build(t){return new wc(t,this.config)}}class wc extends L{static[S]="PgBoolean";getSQLType(){return"boolean"}}function Tn(e){return new yc(e??"")}class bc extends B{static[S]="PgCharBuilder";constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new Sc(t,this.config)}}class Sc extends L{static[S]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function Cc(e,t={}){const{name:n,config:r}=Z(e,t);return new bc(n,r)}class Pc extends B{static[S]="PgCidrBuilder";constructor(t){super(t,"string","PgCidr")}build(t){return new Nc(t,this.config)}}class Nc extends L{static[S]="PgCidr";getSQLType(){return"cidr"}}function Ec(e){return new Pc(e??"")}class _c extends B{static[S]="PgCustomColumnBuilder";constructor(t,n,r){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(t){return new Rc(t,this.config)}}class Rc extends L{static[S]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(t,n){super(t,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}function Dn(e){return(t,n)=>{const{name:r,config:o}=Z(t,n);return new _c(r,o,e)}}class ct extends B{static[S]="PgDateColumnBaseBuilder";defaultNow(){return this.default(Rt`now()`)}}class Tc extends ct{static[S]="PgDateBuilder";constructor(t){super(t,"date","PgDate")}build(t){return new Dc(t,this.config)}}class Dc extends L{static[S]="PgDate";getSQLType(){return"date"}mapFromDriverValue(t){return typeof t=="string"?new Date(t):t}mapToDriverValue(t){return t.toISOString()}}class Ac extends ct{static[S]="PgDateStringBuilder";constructor(t){super(t,"string","PgDateString")}build(t){return new jc(t,this.config)}}class jc extends L{static[S]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(t){return typeof t=="string"?t:t.toISOString().slice(0,-14)}}function Ic(e,t){const{name:n,config:r}=Z(e,t);return r?.mode==="date"?new Tc(n):new Ac(n)}class Mc extends B{static[S]="PgDoublePrecisionBuilder";constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new Oc(t,this.config)}}class Oc extends L{static[S]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}function Lc(e){return new Mc(e??"")}class Fc extends B{static[S]="PgInetBuilder";constructor(t){super(t,"string","PgInet")}build(t){return new kc(t,this.config)}}class kc extends L{static[S]="PgInet";getSQLType(){return"inet"}}function $c(e){return new Fc(e??"")}class Bc extends $t{static[S]="PgIntegerBuilder";constructor(t){super(t,"number","PgInteger")}build(t){return new Vc(t,this.config)}}class Vc extends L{static[S]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}function ve(e){return new Bc(e??"")}class zc extends B{static[S]="PgIntervalBuilder";constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new Uc(t,this.config)}}class Uc extends L{static[S]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const t=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${t}${n}`}}function Wc(e,t={}){const{name:n,config:r}=Z(e,t);return new zc(n,r)}class Hc extends B{static[S]="PgJsonBuilder";constructor(t){super(t,"json","PgJson")}build(t){return new Kc(t,this.config)}}class Kc extends L{static[S]="PgJson";constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}function qc(e){return new Hc(e??"")}class Gc extends B{static[S]="PgJsonbBuilder";constructor(t){super(t,"json","PgJsonb")}build(t){return new Qc(t,this.config)}}class Qc extends L{static[S]="PgJsonb";constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}function Xc(e){return new Gc(e??"")}class Yc extends B{static[S]="PgLineBuilder";constructor(t){super(t,"array","PgLine")}build(t){return new Jc(t,this.config)}}class Jc extends L{static[S]="PgLine";getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,o]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(o)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}class Zc extends B{static[S]="PgLineABCBuilder";constructor(t){super(t,"json","PgLineABC")}build(t){return new el(t,this.config)}}class el extends L{static[S]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,o]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(o)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}function tl(e,t){const{name:n,config:r}=Z(e,t);return!r?.mode||r.mode==="tuple"?new Yc(n):new Zc(n)}class nl extends B{static[S]="PgMacaddrBuilder";constructor(t){super(t,"string","PgMacaddr")}build(t){return new rl(t,this.config)}}class rl extends L{static[S]="PgMacaddr";getSQLType(){return"macaddr"}}function ol(e){return new nl(e??"")}class sl extends B{static[S]="PgMacaddr8Builder";constructor(t){super(t,"string","PgMacaddr8")}build(t){return new il(t,this.config)}}class il extends L{static[S]="PgMacaddr8";getSQLType(){return"macaddr8"}}function al(e){return new sl(e??"")}class cl extends B{static[S]="PgNumericBuilder";constructor(t,n,r){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(t){return new ll(t,this.config)}}class ll extends L{static[S]="PgNumeric";precision;scale;constructor(t,n){super(t,n),this.precision=n.precision,this.scale=n.scale}mapFromDriverValue(t){return typeof t=="string"?t:String(t)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class ul extends B{static[S]="PgNumericNumberBuilder";constructor(t,n,r){super(t,"number","PgNumericNumber"),this.config.precision=n,this.config.scale=r}build(t){return new dl(t,this.config)}}class dl extends L{static[S]="PgNumericNumber";precision;scale;constructor(t,n){super(t,n),this.precision=n.precision,this.scale=n.scale}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class fl extends B{static[S]="PgNumericBigIntBuilder";constructor(t,n,r){super(t,"bigint","PgNumericBigInt"),this.config.precision=n,this.config.scale=r}build(t){return new pl(t,this.config)}}class pl extends L{static[S]="PgNumericBigInt";precision;scale;constructor(t,n){super(t,n),this.precision=n.precision,this.scale=n.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function ml(e,t){const{name:n,config:r}=Z(e,t),o=r?.mode;return o==="number"?new ul(n,r?.precision,r?.scale):o==="bigint"?new fl(n,r?.precision,r?.scale):new cl(n,r?.precision,r?.scale)}class hl extends B{static[S]="PgPointTupleBuilder";constructor(t){super(t,"array","PgPointTuple")}build(t){return new gl(t,this.config)}}class gl extends L{static[S]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}class xl extends B{static[S]="PgPointObjectBuilder";constructor(t){super(t,"json","PgPointObject")}build(t){return new vl(t,this.config)}}class vl extends L{static[S]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}function yl(e,t){const{name:n,config:r}=Z(e,t);return!r?.mode||r.mode==="tuple"?new hl(n):new xl(n)}function wl(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function gr(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let o=0;o<8;o++)r.setUint8(o,e[t+o]);return r.getFloat64(0,!0)}function uo(e){const t=wl(e);let n=0;const r=t[n];n+=1;const o=new DataView(t.buffer),s=o.getUint32(n,r===1);if(n+=4,s&536870912&&(o.getUint32(n,r===1),n+=4),(s&65535)===1){const a=gr(t,n);n+=8;const c=gr(t,n);return n+=8,[a,c]}throw new Error("Unsupported geometry type")}class bl extends B{static[S]="PgGeometryBuilder";constructor(t){super(t,"array","PgGeometry")}build(t){return new Sl(t,this.config)}}class Sl extends L{static[S]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return uo(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}class Cl extends B{static[S]="PgGeometryObjectBuilder";constructor(t){super(t,"json","PgGeometryObject")}build(t){return new Pl(t,this.config)}}class Pl extends L{static[S]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=uo(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}function Nl(e,t){const{name:n,config:r}=Z(e,t);return!r?.mode||r.mode==="tuple"?new bl(n):new Cl(n)}class El extends B{static[S]="PgRealBuilder";constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new _l(t,this.config)}}class _l extends L{static[S]="PgReal";constructor(t,n){super(t,n)}getSQLType(){return"real"}mapFromDriverValue=t=>typeof t=="string"?Number.parseFloat(t):t}function Rl(e){return new El(e??"")}class Tl extends B{static[S]="PgSerialBuilder";constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Dl(t,this.config)}}class Dl extends L{static[S]="PgSerial";getSQLType(){return"serial"}}function Al(e){return new Tl(e??"")}class jl extends $t{static[S]="PgSmallIntBuilder";constructor(t){super(t,"number","PgSmallInt")}build(t){return new Il(t,this.config)}}class Il extends L{static[S]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=t=>typeof t=="string"?Number(t):t}function Ml(e){return new jl(e??"")}class Ol extends B{static[S]="PgSmallSerialBuilder";constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Ll(t,this.config)}}class Ll extends L{static[S]="PgSmallSerial";getSQLType(){return"smallserial"}}function Fl(e){return new Ol(e??"")}class kl extends B{static[S]="PgTextBuilder";constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new $l(t,this.config)}}class $l extends L{static[S]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function X(e,t={}){const{name:n,config:r}=Z(e,t);return new kl(n,r)}class Bl extends ct{constructor(t,n,r){super(t,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[S]="PgTimeBuilder";build(t){return new Vl(t,this.config)}}class Vl extends L{static[S]="PgTime";withTimezone;precision;constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function zl(e,t={}){const{name:n,config:r}=Z(e,t);return new Bl(n,r.withTimezone??!1,r.precision)}class Ul extends ct{static[S]="PgTimestampBuilder";constructor(t,n,r){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(t){return new Wl(t,this.config)}}class Wl extends L{static[S]="PgTimestamp";withTimezone;precision;constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(t){return typeof t=="string"?new Date(this.withTimezone?t:t+"+0000"):t}mapToDriverValue=t=>t.toISOString()}class Hl extends ct{static[S]="PgTimestampStringBuilder";constructor(t,n,r){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(t){return new Kl(t,this.config)}}class Kl extends L{static[S]="PgTimestampString";withTimezone;precision;constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(t){if(typeof t=="string")return t;const n=t.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){const r=t.getTimezoneOffset(),o=r<=0?"+":"-";return`${n}${o}${Math.floor(Math.abs(r)/60).toString().padStart(2,"0")}`}return n}}function z(e,t={}){const{name:n,config:r}=Z(e,t);return r?.mode==="string"?new Hl(n,r.withTimezone??!1,r.precision):new Ul(n,r?.withTimezone??!1,r?.precision)}class ql extends B{static[S]="PgUUIDBuilder";constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Rt`gen_random_uuid()`)}build(t){return new Gl(t,this.config)}}class Gl extends L{static[S]="PgUUID";getSQLType(){return"uuid"}}function H(e){return new ql(e??"")}class Ql extends B{static[S]="PgVarcharBuilder";constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new Xl(t,this.config)}}class Xl extends L{static[S]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function Y(e,t={}){const{name:n,config:r}=Z(e,t);return new Ql(n,r)}class Yl extends B{static[S]="PgBinaryVectorBuilder";constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new Jl(t,this.config)}}class Jl extends L{static[S]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function Zl(e,t){const{name:n,config:r}=Z(e,t);return new Yl(n,r)}class eu extends B{static[S]="PgHalfVectorBuilder";constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new tu(t,this.config)}}class tu extends L{static[S]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function nu(e,t){const{name:n,config:r}=Z(e,t);return new eu(n,r)}class ru extends B{static[S]="PgSparseVectorBuilder";constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new ou(t,this.config)}}class ou extends L{static[S]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function su(e,t){const{name:n,config:r}=Z(e,t);return new ru(n,r)}class iu extends B{static[S]="PgVectorBuilder";constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new au(t,this.config)}}class au extends L{static[S]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function cu(e,t){const{name:n,config:r}=Z(e,t);return new iu(n,r)}function lu(){return{bigint:lo,bigserial:vc,boolean:Tn,char:Cc,cidr:Ec,customType:Dn,date:Ic,doublePrecision:Lc,inet:$c,integer:ve,interval:Wc,json:qc,jsonb:Xc,line:tl,macaddr:ol,macaddr8:al,numeric:ml,point:yl,geometry:Nl,real:Rl,serial:Al,smallint:Ml,smallserial:Fl,text:X,time:zl,timestamp:z,uuid:H,varchar:Y,bit:Zl,halfvec:nu,sparsevec:su,vector:cu}}const xn=Symbol.for("drizzle:PgInlineForeignKeys"),xr=Symbol.for("drizzle:EnableRLS");class tn extends ne{static[S]="PgTable";static Symbol=Object.assign({},ne.Symbol,{InlineForeignKeys:xn,EnableRLS:xr});[xn]=[];[xr]=!1;[ne.Symbol.ExtraConfigBuilder]=void 0;[ne.Symbol.ExtraConfigColumns]={}}function uu(e,t,n,r,o=e){const s=new tn(e,r,o),a=typeof t=="function"?t(lu()):t,c=Object.fromEntries(Object.entries(a).map(([d,p])=>{const m=p;m.setName(d);const h=m.build(s);return s[xn].push(...m.buildForeignKeys(h,s)),[d,h]})),u=Object.fromEntries(Object.entries(a).map(([d,p])=>{const m=p;m.setName(d);const h=m.buildExtraConfigColumn(s);return[d,h]})),f=Object.assign(s,c);return f[ne.Symbol.Columns]=c,f[ne.Symbol.ExtraConfigColumns]=u,n&&(f[tn.Symbol.ExtraConfigBuilder]=n),Object.assign(f,{enableRLS:()=>(f[tn.Symbol.EnableRLS]=!0,f)})}const ie=(e,t,n)=>uu(e,t,n,void 0);class du{constructor(t,n){this.unique=t,this.name=n}static[S]="PgIndexBuilderOn";on(...t){return new nn(t.map(n=>{if(te(n,q))return n;n=n;const r=new Yt(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...t){return new nn(t.map(n=>{if(te(n,q))return n;n=n;const r=new Yt(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(t,...n){return new nn(n.map(r=>{if(te(r,q))return r;r=r;const o=new Yt(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),o}),this.unique,!0,this.name,t)}}class nn{static[S]="PgIndexBuilder";config;constructor(t,n,r,o,s="btree"){this.config={name:o,columns:t,unique:n,only:r,method:s}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new fu(this.config,t)}}class fu{static[S]="PgIndex";config;constructor(t,n){this.config={...t,table:n}}}function V(e){return new du(!1,e)}const fo=Dn({dataType(){return"tsvector"}}),po=Dn({dataType(){return"vector(1536)"}}),mo=ie("users",{id:H("id").primaryKey().defaultRandom(),username:Y("username",{length:50}).notNull().unique(),passwordHash:Y("password_hash",{length:255}).notNull(),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({usernameIdx:V("users_username_idx").on(e.username)}));ie("sessions",{id:H("id").primaryKey().defaultRandom(),userId:H("user_id").references(()=>mo.id,{onDelete:"cascade"}).notNull(),token:Y("token",{length:255}).notNull().unique(),expiresAt:z("expires_at").notNull(),createdAt:z("created_at").defaultNow()},e=>({tokenIdx:V("sessions_token_idx").on(e.token),userIdIdx:V("sessions_user_id_idx").on(e.userId)}));const ho=ie("folders",{id:H("id").primaryKey().defaultRandom(),name:Y("name",{length:255}).notNull(),parentId:H("parent_id").references(()=>ho.id,{onDelete:"cascade"}),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({parentIdIdx:V("folders_parent_id_idx").on(e.parentId)})),lt=ie("files",{id:H("id").primaryKey().defaultRandom(),name:Y("name",{length:255}).notNull(),folderId:H("folder_id").references(()=>ho.id,{onDelete:"set null"}),blobUrl:X("blob_url").notNull(),blobPath:X("blob_path").notNull(),fileSize:lo("file_size",{mode:"number"}),mimeType:Y("mime_type",{length:100}),contentPreview:X("content_preview"),fullContent:X("full_content"),contentHash:Y("content_hash",{length:64}),searchVector:fo("search_vector"),embedding:po("embedding"),embeddingUpdatedAt:z("embedding_updated_at"),chunkCount:ve("chunk_count").default(0),processedForEmbedding:Tn("processed_for_embedding").default(!1),parsedAt:z("parsed_at"),parseStatus:Y("parse_status",{length:20}).default("pending"),parseError:X("parse_error"),uploadedAt:z("uploaded_at").defaultNow(),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({folderIdIdx:V("files_folder_id_idx").on(e.folderId),contentHashIdx:V("files_content_hash_idx").on(e.contentHash),parseStatusIdx:V("files_parse_status_idx").on(e.parseStatus),uploadedAtIdx:V("files_uploaded_at_idx").on(e.uploadedAt),searchVectorIdx:V("files_search_vector_idx").using("gin",e.searchVector)})),pu=ie("tags",{id:H("id").primaryKey().defaultRandom(),name:Y("name",{length:100}).notNull().unique(),color:Y("color",{length:7}).default("#3B82F6"),createdAt:z("created_at").defaultNow()},e=>({nameIdx:V("tags_name_idx").on(e.name)}));ie("file_tags",{fileId:H("file_id").references(()=>lt.id,{onDelete:"cascade"}).notNull(),tagId:H("tag_id").references(()=>pu.id,{onDelete:"cascade"}).notNull(),taggedAt:z("tagged_at").defaultNow()},e=>({fileIdIdx:V("file_tags_file_id_idx").on(e.fileId),tagIdIdx:V("file_tags_tag_id_idx").on(e.tagId)}));ie("parse_tasks",{id:Y("id",{length:100}).primaryKey(),fileId:H("file_id").references(()=>lt.id,{onDelete:"cascade"}).notNull(),status:Y("status",{length:20}).notNull(),message:X("message"),markdownLength:ve("markdown_length"),parseResult:X("parse_result"),error:X("error"),createdAt:z("created_at").defaultNow(),expiresAt:z("expires_at").notNull()},e=>({fileIdIdx:V("parse_tasks_file_id_idx").on(e.fileId),statusIdx:V("parse_tasks_status_idx").on(e.status),expiresAtIdx:V("parse_tasks_expires_at_idx").on(e.expiresAt)}));ie("parse_queue",{id:H("id").primaryKey().defaultRandom(),fileId:H("file_id").references(()=>lt.id,{onDelete:"cascade"}).notNull(),status:Y("status",{length:20}).notNull().default("pending"),error:X("error"),createdAt:z("created_at").defaultNow(),startedAt:z("started_at"),completedAt:z("completed_at")},e=>({fileIdIdx:V("parse_queue_file_id_idx").on(e.fileId),statusIdx:V("parse_queue_status_idx").on(e.status,e.createdAt)}));const mu=ie("ai_configs",{id:H("id").primaryKey().defaultRandom(),provider:Y("provider",{length:50}).notNull(),apiKeyEncrypted:X("api_key_encrypted").notNull(),model:Y("model",{length:100}).notNull(),isDefault:Tn("is_default").default(!1),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({providerIdx:V("ai_configs_provider_idx").on(e.provider),isDefaultIdx:V("ai_configs_is_default_idx").on(e.isDefault)})),hu=ie("chat_sessions",{id:H("id").primaryKey().defaultRandom(),fileId:H("file_id").references(()=>lt.id,{onDelete:"cascade"}),aiConfigId:H("ai_config_id").references(()=>mu.id,{onDelete:"set null"}),title:Y("title",{length:255}),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({fileIdIdx:V("chat_sessions_file_id_idx").on(e.fileId),createdAtIdx:V("chat_sessions_created_at_idx").on(e.createdAt)}));ie("chat_messages",{id:H("id").primaryKey().defaultRandom(),sessionId:H("session_id").references(()=>hu.id,{onDelete:"cascade"}).notNull(),role:Y("role",{length:20}).notNull(),content:X("content").notNull(),createdAt:z("created_at").defaultNow()},e=>({sessionIdIdx:V("chat_messages_session_id_idx").on(e.sessionId),createdAtIdx:V("chat_messages_created_at_idx").on(e.createdAt)}));ie("document_chunks",{id:H("id").primaryKey().defaultRandom(),fileId:H("file_id").references(()=>lt.id,{onDelete:"cascade"}).notNull(),chunkIndex:ve("chunk_index").notNull(),content:X("content").notNull(),embedding:po("embedding"),searchVector:fo("search_vector"),startPosition:ve("start_position").notNull(),endPosition:ve("end_position").notNull(),pageIndex:ve("page_index"),metadata:X("metadata").$type(),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({fileIdIdx:V("document_chunks_file_id_idx").on(e.fileId),fileIdChunkIdx:V("document_chunks_file_id_chunk_idx").on(e.fileId,e.chunkIndex),searchVectorIdx:V("document_chunks_search_vector_idx").using("gin",e.searchVector)}));const gu=ie("conversations",{id:H("id").primaryKey().defaultRandom(),title:Y("title",{length:500}),userId:H("user_id").references(()=>mo.id,{onDelete:"cascade"}),fileIds:X("file_ids"),config:X("config"),messageCount:ve("message_count").default(0),totalTokensUsed:ve("total_tokens_used").default(0),createdAt:z("created_at").defaultNow(),updatedAt:z("updated_at").defaultNow()},e=>({userIdIdx:V("conversations_user_idx").on(e.userId),updatedAtIdx:V("conversations_updated_at_idx").on(e.updatedAt)}));ie("conversation_messages",{id:H("id").primaryKey().defaultRandom(),conversationId:H("conversation_id").references(()=>gu.id,{onDelete:"cascade"}).notNull(),role:Y("role",{length:20}).notNull(),content:X("content").notNull(),contextChunks:X("context_chunks"),contextFiles:X("context_files"),sources:X("sources"),tokensUsed:ve("tokens_used"),createdAt:z("created_at").defaultNow()},e=>({conversationIdIdx:V("conversation_messages_conversation_id_idx").on(e.conversationId),createdAtIdx:V("conversation_messages_created_at_idx").on(e.createdAt)}));function go(e,t=null){return e.filter(n=>n.parentId===t).map(n=>({...n,id:String(n.id),parentId:n.parentId?String(n.parentId):null,createdAt:n.createdAt||new Date,updatedAt:n.updatedAt||new Date,children:go(e,String(n.id))}))}function xo({node:e,level:t,selectedFolderId:n,onFolderSelect:r,onFolderDelete:o}){const[s,a]=l.useState(!1),c=e.children.length>0,u=n===e.id,f=t>=1,d=h=>{h.target.closest("button")||(c&&a(!s),r?.(String(e.id)))},p=h=>{h.stopPropagation(),window.location.href=`/analyze?folderId=${String(e.id)}&folderName=${encodeURIComponent(String(e.name))}`},m=h=>{h.stopPropagation(),confirm(`"${String(e.name)}"`)&&o?.(String(e.id))};return i.jsxs("div",{children:[i.jsxs("div",{className:Q("flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-accent transition-colors group",u&&"bg-accent"),style:{paddingLeft:`${t*16+8}px`},onClick:d,children:[c?s?i.jsx(ua,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(to,{className:"h-4 w-4 text-muted-foreground"}):i.jsx("div",{className:"w-4 h-4"}),s?i.jsx(Pa,{className:"h-4 w-4 text-blue-500"}):i.jsx(Et,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"text-sm flex-1 truncate",children:String(e.name)}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(oe,{variant:"ghost",size:"sm",className:"h-6 px-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:p,title:"AI",children:i.jsx(tt,{className:"h-3 w-3"})}),f&&i.jsx(oe,{variant:"ghost",size:"sm",className:"h-6 px-2 opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600 hover:bg-red-50",onClick:m,title:"",children:i.jsx(Wa,{className:"h-3 w-3"})})]})]}),c&&s&&i.jsx("div",{children:e.children.map(h=>i.jsx(xo,{node:h,level:t+1,selectedFolderId:n,onFolderSelect:r,onFolderDelete:o},String(h.id)))})]})}function xu({folders:e,selectedFolderId:t,onFolderSelect:n,onFolderDelete:r}){return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:Q("flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded-md hover:bg-accent transition-colors",t===null&&"bg-accent"),onClick:()=>n?.(null),children:[i.jsx(Et,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"text-sm",children:""})]}),e.map(o=>i.jsx(xo,{node:o,level:0,selectedFolderId:t,onFolderSelect:n,onFolderDelete:r},String(o.id)))]})}const vu=Yi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vr({className:e,variant:t,...n}){return i.jsx("div",{className:Q(vu({variant:t}),e),...n})}function yu(e,t=[]){let n=[];function r(s,a){const c=l.createContext(a);c.displayName=s+"Context";const u=n.length;n=[...n,a];const f=p=>{const{scope:m,children:h,...y}=p,g=m?.[e]?.[u]||c,b=l.useMemo(()=>y,Object.values(y));return i.jsx(g.Provider,{value:b,children:h})};f.displayName=s+"Provider";function d(p,m){const h=m?.[e]?.[u]||c,y=l.useContext(h);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[f,d]}const o=()=>{const s=n.map(a=>l.createContext(a));return function(c){const u=c?.[e]||s;return l.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[r,wu(o,...t)]}function wu(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:f})=>{const p=u(s)[`__scope${f}`];return{...c,...p}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var bu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vo=bu.reduce((e,t)=>{const n=Ji(`Primitive.${t}`),r=l.forwardRef((o,s)=>{const{asChild:a,...c}=o,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),An="Progress",jn=100,[Su]=yu(An),[Cu,Pu]=Su(An),yo=l.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:s=Nu,...a}=e;(o||o===0)&&!yr(o)&&console.error(Eu(`${o}`,"Progress"));const c=yr(o)?o:jn;r!==null&&!wr(r,c)&&console.error(_u(`${r}`,"Progress"));const u=wr(r,c)?r:null,f=Tt(u)?s(u,c):void 0;return i.jsx(Cu,{scope:n,value:u,max:c,children:i.jsx(vo.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Tt(u)?u:void 0,"aria-valuetext":f,role:"progressbar","data-state":So(u,c),"data-value":u??void 0,"data-max":c,...a,ref:t})})});yo.displayName=An;var wo="ProgressIndicator",bo=l.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,o=Pu(wo,n);return i.jsx(vo.div,{"data-state":So(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});bo.displayName=wo;function Nu(e,t){return`${Math.round(e/t*100)}%`}function So(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Tt(e){return typeof e=="number"}function yr(e){return Tt(e)&&!isNaN(e)&&e>0}function wr(e,t){return Tt(e)&&!isNaN(e)&&e<=t&&e>=0}function Eu(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${jn}\`.`}function _u(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${jn} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Co=yo,Ru=bo;const He=l.forwardRef(({className:e,value:t,...n},r)=>i.jsx(Co,{ref:r,className:Q("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:i.jsx(Ru,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));He.displayName=Co.displayName;function Tu({file:e,onDelete:t,onProcessed:n}){const{toast:r}=Nn(),[o,s]=l.useState(!1),[a,c]=l.useState("idle"),[u,f]=l.useState({status:"idle"}),d=!!(e.fullContent||e.contentPreview),p=!e.fullContent&&!!e.contentPreview,m=!e.fullContent&&e.mimeType?.includes("pdf");l.useEffect(()=>{if(!m)return;const w=async()=>{try{const x=await fetch(`/api/parse/status?fileId=${e.id}`);if(x.ok){const v=await x.json();f({status:v.status,queuePosition:v.queuePosition,currentProcessing:v.currentProcessing,error:v.error}),v.status==="completed"&&!e.fullContent&&n?.(e.id)}}catch(x){console.error("[FileCard] :",x)}};w();const P=setInterval(w,5e3);return()=>clearInterval(P)},[e.id,e.fullContent,m,n]);const h=async()=>{if(!d){r({title:"",description:"",variant:"destructive"});return}s(!0),c("chunking");try{const w=await fetch("/api/embeddings/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:e.id})});if(!w.ok){const x=await w.json();throw new Error(x.error||"")}c("embedding"),await new Promise(x=>setTimeout(x,500));const P=await w.json();c("done"),r({title:"",description:p?` ${P.chunksCreated}  ${P.totalTokensUsed} tokens`:` ${P.chunksCreated}  ${P.totalTokensUsed} tokens`}),n?.(e.id),setTimeout(()=>{c("idle")},2e3)}catch(w){c("idle"),r({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}finally{s(!1)}},y=async()=>{try{if(!(await fetch("/api/parse/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:e.id})})).ok)throw new Error("");r({title:"",description:""}),f({status:"pending"})}catch(w){r({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}},g=()=>{window.location.href=`/chat?fileId=${e.id}`},b=()=>u.status==="idle"||u.status==="completed"||e.fullContent?null:u.status==="pending"?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(va,{className:"h-3 w-3"}),i.jsx("span",{children:u.queuePosition&&u.queuePosition>0?` ${u.queuePosition} `:""})]}),u.currentProcessing&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:[": ",u.currentProcessing.fileName]}),i.jsx(He,{value:10,className:"h-1"})]}):u.status==="processing"?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(ur,{className:"h-3 w-3 animate-spin"}),i.jsx("span",{children:" PDF ..."})]}),i.jsx(He,{value:50,className:"h-1"})]}):u.status==="failed"?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[i.jsx(ar,{className:"h-3 w-3"}),i.jsx("span",{children:""})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:u.error?.substring(0,50)}),i.jsxs(oe,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:y,children:[i.jsx(Oa,{className:"h-3 w-3 mr-1"}),""]})]}):null;return i.jsxs(Yr,{className:"hover:shadow-md transition-shadow flex flex-col h-full",children:[i.jsx(Zi,{className:"pb-2 md:pb-3 px-3 md:px-6",children:i.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx(rt,{className:"h-4 w-4 md:h-5 md:w-5 text-red-500 flex-shrink-0"}),i.jsx(ea,{className:"text-xs md:text-sm truncate hover:text-primary cursor-pointer transition-colors",onClick:()=>{const w=`/api/files/${e.id}/download`;window.open(w,"_blank","noopener,noreferrer")},title:"",children:e.name})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[e.processedForEmbedding&&i.jsxs(vr,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[i.jsx(mn,{className:"h-2.5 w-2.5 md:h-3 md:w-3 mr-0.5 md:mr-1"}),i.jsx("span",{className:"hidden sm:inline",children:""}),i.jsx("span",{className:"sm:hidden",children:"OK"})]}),p&&!e.processedForEmbedding&&i.jsxs(vr,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200",children:[i.jsx(ar,{className:"h-2.5 w-2.5 md:h-3 md:w-3 mr-0.5 md:mr-1"}),i.jsx("span",{className:"hidden sm:inline",children:""}),i.jsx("span",{className:"sm:hidden",children:""})]})]})]})}),i.jsxs(Jr,{className:"space-y-1.5 md:space-y-2 pb-2 md:pb-3 px-3 md:px-6 flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(lr,{className:"h-3 w-3"}),i.jsx("span",{children:ta(Number(e.fileSize))})]}),e.chunkCount&&e.chunkCount>0&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(tt,{className:"h-3 w-3"}),i.jsxs("span",{children:[e.chunkCount," "]})]}),e.contentPreview&&i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 md:line-clamp-3 bg-muted/50 p-2 rounded-md",children:e.contentPreview}),b(),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(ia,{className:"h-3 w-3"}),i.jsx("span",{children:e.uploadedAt?na(new Date(e.uploadedAt)):""})]})]}),i.jsxs(ra,{className:"gap-2 flex-wrap pt-2 px-3 md:px-6 mt-auto",children:[e.processedForEmbedding?i.jsxs(oe,{size:"sm",variant:"default",className:"flex-1 min-w-[100px] md:min-w-[120px] min-h-[44px] bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white text-sm",onClick:g,children:[i.jsx(tt,{className:"h-4 w-4 mr-1.5 md:mr-2"}),""]}):i.jsx(oe,{size:"sm",className:"flex-1 min-w-[100px] md:min-w-[120px] min-h-[44px] bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-sm",onClick:h,disabled:o||!d||u.status==="processing"||u.status==="pending",children:o?i.jsxs(i.Fragment,{children:[i.jsx(ur,{className:"h-4 w-4 mr-1.5 md:mr-2 animate-spin"}),a==="chunking"&&"...",a==="embedding"&&"...",a==="done"&&"!"]}):i.jsxs(i.Fragment,{children:[i.jsx(tt,{className:"h-4 w-4 mr-1.5 md:mr-2"}),u.status==="pending"||u.status==="processing"?"...":""]})}),i.jsxs(oe,{size:"sm",variant:"outline",className:"min-h-[44px] min-w-[44px] px-3 md:px-4",onClick:()=>{const w=`/api/files/${e.id}/download`;window.open(w,"_blank","noopener,noreferrer")},children:[i.jsx("span",{className:"hidden sm:inline",children:""}),i.jsx(lr,{className:"h-4 w-4 sm:hidden"})]}),t&&i.jsxs(oe,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10 min-h-[44px] min-w-[44px] px-3 md:px-4",onClick:()=>t(e.id),children:[i.jsx("span",{className:"hidden sm:inline",children:""}),i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 sm:hidden",children:[i.jsx("path",{d:"M3 6h18"}),i.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),i.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})]})]})]})}function M(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function Du(e,t){const n=l.createContext(t),r=s=>{const{children:a,...c}=s,u=l.useMemo(()=>c,Object.values(c));return i.jsx(n.Provider,{value:u,children:a})};r.displayName=e+"Provider";function o(s){const a=l.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function Oe(e,t=[]){let n=[];function r(s,a){const c=l.createContext(a),u=n.length;n=[...n,a];const f=p=>{const{scope:m,children:h,...y}=p,g=m?.[e]?.[u]||c,b=l.useMemo(()=>y,Object.values(y));return i.jsx(g.Provider,{value:b,children:h})};f.displayName=s+"Provider";function d(p,m){const h=m?.[e]?.[u]||c,y=l.useContext(h);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[f,d]}const o=()=>{const s=n.map(a=>l.createContext(a));return function(c){const u=c?.[e]||s;return l.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[r,Au(o,...t)]}function Au(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:f})=>{const p=u(s)[`__scope${f}`];return{...c,...p}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var Pe=globalThis?.document?l.useLayoutEffect:()=>{},ju=eo[" useId ".trim().toString()]||(()=>{}),Iu=0;function ze(e){const[t,n]=l.useState(ju());return Pe(()=>{n(r=>r??String(Iu++))},[e]),t?`radix-${t}`:""}var Mu=eo[" useInsertionEffect ".trim().toString()]||Pe;function In({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,s,a]=Ou({defaultProp:t,onChange:n}),c=e!==void 0,u=c?e:o;{const d=l.useRef(e!==void 0);l.useEffect(()=>{const p=d.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,r])}const f=l.useCallback(d=>{if(c){const p=Lu(d)?d(e):d;p!==e&&a.current?.(p)}else s(d)},[c,e,s,a]);return[u,f]}function Ou({defaultProp:e,onChange:t}){const[n,r]=l.useState(e),o=l.useRef(n),s=l.useRef(t);return Mu(()=>{s.current=t},[t]),l.useEffect(()=>{o.current!==n&&(s.current?.(n),o.current=n)},[n,o]),[n,r,s]}function Lu(e){return typeof e=="function"}function Fu(e){const t=ku(e),n=l.forwardRef((r,o)=>{const{children:s,...a}=r,c=l.Children.toArray(s),u=c.find(Bu);if(u){const f=u.props.children,d=c.map(p=>p===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:p);return i.jsx(t,{...a,ref:o,children:l.isValidElement(f)?l.cloneElement(f,void 0,d):null})}return i.jsx(t,{...a,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function ku(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const a=zu(o),c=Vu(s,o.props);return o.type!==l.Fragment&&(c.ref=r?Ge(r,a):a),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $u=Symbol("radix.slottable");function Bu(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$u}function Vu(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...c)=>{const u=s(...c);return o(...c),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function zu(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Uu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],K=Uu.reduce((e,t)=>{const n=Fu(`Primitive.${t}`),r=l.forwardRef((o,s)=>{const{asChild:a,...c}=o,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Po(e,t){e&&Zr.flushSync(()=>e.dispatchEvent(t))}function re(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>t.current?.(...n),[])}function Wu(e,t=globalThis?.document){const n=re(e);l.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Hu="DismissableLayer",vn="dismissableLayer.update",Ku="dismissableLayer.pointerDownOutside",qu="dismissableLayer.focusOutside",br,No=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mn=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...u}=e,f=l.useContext(No),[d,p]=l.useState(null),m=d?.ownerDocument??globalThis?.document,[,h]=l.useState({}),y=G(t,C=>p(C)),g=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),P=d?g.indexOf(d):-1,x=f.layersWithOutsidePointerEventsDisabled.size>0,v=P>=w,E=Xu(C=>{const T=C.target,j=[...f.branches].some(N=>N.contains(T));!v||j||(o?.(C),a?.(C),C.defaultPrevented||c?.())},m),_=Yu(C=>{const T=C.target;[...f.branches].some(N=>N.contains(T))||(s?.(C),a?.(C),C.defaultPrevented||c?.())},m);return Wu(C=>{P===f.layers.size-1&&(r?.(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},m),l.useEffect(()=>{if(d)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(br=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),Sr(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=br)}},[d,m,n,f]),l.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),Sr())},[d,f]),l.useEffect(()=>{const C=()=>h({});return document.addEventListener(vn,C),()=>document.removeEventListener(vn,C)},[]),i.jsx(K.div,{...u,ref:y,style:{pointerEvents:x?v?"auto":"none":void 0,...e.style},onFocusCapture:M(e.onFocusCapture,_.onFocusCapture),onBlurCapture:M(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:M(e.onPointerDownCapture,E.onPointerDownCapture)})});Mn.displayName=Hu;var Gu="DismissableLayerBranch",Qu=l.forwardRef((e,t)=>{const n=l.useContext(No),r=l.useRef(null),o=G(t,r);return l.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(K.div,{...e,ref:o})});Qu.displayName=Gu;function Xu(e,t=globalThis?.document){const n=re(e),r=l.useRef(!1),o=l.useRef(()=>{});return l.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let u=function(){Eo(Ku,n,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=u,t.addEventListener("click",o.current,{once:!0})):u()}else t.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Yu(e,t=globalThis?.document){const n=re(e),r=l.useRef(!1);return l.useEffect(()=>{const o=s=>{s.target&&!r.current&&Eo(qu,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Sr(){const e=new CustomEvent(vn);document.dispatchEvent(e)}function Eo(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Po(o,s):o.dispatchEvent(s)}var rn="focusScope.autoFocusOnMount",on="focusScope.autoFocusOnUnmount",Cr={bubbles:!1,cancelable:!0},Ju="FocusScope",On=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...a}=e,[c,u]=l.useState(null),f=re(o),d=re(s),p=l.useRef(null),m=G(t,g=>u(g)),h=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(r){let g=function(x){if(h.paused||!c)return;const v=x.target;c.contains(v)?p.current=v:_e(p.current,{select:!0})},b=function(x){if(h.paused||!c)return;const v=x.relatedTarget;v!==null&&(c.contains(v)||_e(p.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const E of x)E.removedNodes.length>0&&_e(c)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const P=new MutationObserver(w);return c&&P.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),P.disconnect()}}},[r,c,h.paused]),l.useEffect(()=>{if(c){Nr.add(h);const g=document.activeElement;if(!c.contains(g)){const w=new CustomEvent(rn,Cr);c.addEventListener(rn,f),c.dispatchEvent(w),w.defaultPrevented||(Zu(od(_o(c)),{select:!0}),document.activeElement===g&&_e(c))}return()=>{c.removeEventListener(rn,f),setTimeout(()=>{const w=new CustomEvent(on,Cr);c.addEventListener(on,d),c.dispatchEvent(w),w.defaultPrevented||_e(g??document.body,{select:!0}),c.removeEventListener(on,d),Nr.remove(h)},0)}}},[c,f,d,h]);const y=l.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(b&&w){const P=g.currentTarget,[x,v]=ed(P);x&&v?!g.shiftKey&&w===v?(g.preventDefault(),n&&_e(x,{select:!0})):g.shiftKey&&w===x&&(g.preventDefault(),n&&_e(v,{select:!0})):w===P&&g.preventDefault()}},[n,r,h.paused]);return i.jsx(K.div,{tabIndex:-1,...a,ref:m,onKeyDown:y})});On.displayName=Ju;function Zu(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(_e(r,{select:t}),document.activeElement!==n)return}function ed(e){const t=_o(e),n=Pr(t,e),r=Pr(t.reverse(),e);return[n,r]}function _o(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Pr(e,t){for(const n of e)if(!td(n,{upTo:t}))return n}function td(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nd(e){return e instanceof HTMLInputElement&&"select"in e}function _e(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&nd(e)&&t&&e.select()}}var Nr=rd();function rd(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Er(e,t),e.unshift(t)},remove(t){e=Er(e,t),e[0]?.resume()}}}function Er(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function od(e){return e.filter(t=>t.tagName!=="A")}var sd="Portal",Ln=l.forwardRef((e,t)=>{const{container:n,...r}=e,[o,s]=l.useState(!1);Pe(()=>s(!0),[]);const a=n||o&&globalThis?.document?.body;return a?oa.createPortal(i.jsx(K.div,{...r,ref:t}),a):null});Ln.displayName=sd;function id(e,t){return l.useReducer((n,r)=>t[n][r]??n,e)}var ue=e=>{const{present:t,children:n}=e,r=ad(t),o=typeof n=="function"?n({present:r.isPresent}):l.Children.only(n),s=G(r.ref,cd(o));return typeof n=="function"||r.isPresent?l.cloneElement(o,{ref:s}):null};ue.displayName="Presence";function ad(e){const[t,n]=l.useState(),r=l.useRef(null),o=l.useRef(e),s=l.useRef("none"),a=e?"mounted":"unmounted",[c,u]=id(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const f=gt(r.current);s.current=c==="mounted"?f:"none"},[c]),Pe(()=>{const f=r.current,d=o.current;if(d!==e){const m=s.current,h=gt(f);e?u("MOUNT"):h==="none"||f?.display==="none"?u("UNMOUNT"):u(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Pe(()=>{if(t){let f;const d=t.ownerDocument.defaultView??window,p=h=>{const g=gt(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&g&&(u("ANIMATION_END"),!o.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",f=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=h=>{h.target===t&&(s.current=gt(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{d.clearTimeout(f),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:l.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function gt(e){return e?.animationName||"none"}function cd(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var sn=0;function Ro(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_r()),document.body.insertAdjacentElement("beforeend",e[1]??_r()),sn++,()=>{sn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sn--}},[])}function _r(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xe=function(){return xe=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},xe.apply(this,arguments)};function To(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function ld(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var St="right-scroll-bar-position",Ct="width-before-scroll-bar",ud="with-scroll-bars-hidden",dd="--removed-body-scroll-bar-size";function an(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fd(e,t){var n=l.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var pd=typeof window<"u"?l.useLayoutEffect:l.useEffect,Rr=new WeakMap;function md(e,t){var n=fd(null,function(r){return e.forEach(function(o){return an(o,r)})});return pd(function(){var r=Rr.get(n);if(r){var o=new Set(r),s=new Set(e),a=n.current;o.forEach(function(c){s.has(c)||an(c,null)}),s.forEach(function(c){o.has(c)||an(c,a)})}Rr.set(n,e)},[e]),n}function hd(e){return e}function gd(e,t){t===void 0&&(t=hd);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(c){return s(c)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(s),a=n}var u=function(){var d=a;a=[],d.forEach(s)},f=function(){return Promise.resolve().then(u)};f(),n={push:function(d){a.push(d),f()},filter:function(d){return a=a.filter(d),n}}}};return o}function xd(e){e===void 0&&(e={});var t=gd(null);return t.options=xe({async:!0,ssr:!1},e),t}var Do=function(e){var t=e.sideCar,n=To(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return l.createElement(r,xe({},n))};Do.isSideCarExport=!0;function vd(e,t){return e.useMedium(t),Do}var Ao=xd(),cn=function(){},Bt=l.forwardRef(function(e,t){var n=l.useRef(null),r=l.useState({onScrollCapture:cn,onWheelCapture:cn,onTouchMoveCapture:cn}),o=r[0],s=r[1],a=e.forwardProps,c=e.children,u=e.className,f=e.removeScrollBar,d=e.enabled,p=e.shards,m=e.sideCar,h=e.noRelative,y=e.noIsolation,g=e.inert,b=e.allowPinchZoom,w=e.as,P=w===void 0?"div":w,x=e.gapMode,v=To(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,_=md([n,t]),C=xe(xe({},v),o);return l.createElement(l.Fragment,null,d&&l.createElement(E,{sideCar:Ao,removeScrollBar:f,shards:p,noRelative:h,noIsolation:y,inert:g,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:x}),a?l.cloneElement(l.Children.only(c),xe(xe({},C),{ref:_})):l.createElement(P,xe({},C,{className:u,ref:_}),c))});Bt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bt.classNames={fullWidth:Ct,zeroRight:St};var yd=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wd(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=yd();return t&&e.setAttribute("nonce",t),e}function bd(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Sd(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Cd=function(){var e=0,t=null;return{add:function(n){e==0&&(t=wd())&&(bd(t,n),Sd(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Pd=function(){var e=Cd();return function(t,n){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jo=function(){var e=Pd(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Nd={left:0,top:0,right:0,gap:0},ln=function(e){return parseInt(e||"",10)||0},Ed=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ln(n),ln(r),ln(o)]},_d=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Nd;var t=Ed(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Rd=jo(),Ue="data-scroll-locked",Td=function(e,t,n,r){var o=e.left,s=e.top,a=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ud,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Ue,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(St,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ct,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(St," .").concat(St,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ct," .").concat(Ct,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ue,`] {
    `).concat(dd,": ").concat(c,`px;
  }
`)},Tr=function(){var e=parseInt(document.body.getAttribute(Ue)||"0",10);return isFinite(e)?e:0},Dd=function(){l.useEffect(function(){return document.body.setAttribute(Ue,(Tr()+1).toString()),function(){var e=Tr()-1;e<=0?document.body.removeAttribute(Ue):document.body.setAttribute(Ue,e.toString())}},[])},Ad=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Dd();var s=l.useMemo(function(){return _d(o)},[o]);return l.createElement(Rd,{styles:Td(s,!t,o,n?"":"!important")})},yn=!1;if(typeof window<"u")try{var xt=Object.defineProperty({},"passive",{get:function(){return yn=!0,!0}});window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{yn=!1}var ke=yn?{passive:!1}:!1,jd=function(e){return e.tagName==="TEXTAREA"},Io=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jd(e)&&n[t]==="visible")},Id=function(e){return Io(e,"overflowY")},Md=function(e){return Io(e,"overflowX")},Dr=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Mo(e,r);if(o){var s=Oo(e,r),a=s[1],c=s[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Od=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Ld=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Mo=function(e,t){return e==="v"?Id(t):Md(t)},Oo=function(e,t){return e==="v"?Od(t):Ld(t)},Fd=function(e,t){return e==="h"&&t==="rtl"?-1:1},kd=function(e,t,n,r,o){var s=Fd(e,window.getComputedStyle(t).direction),a=s*r,c=n.target,u=t.contains(c),f=!1,d=a>0,p=0,m=0;do{if(!c)break;var h=Oo(e,c),y=h[0],g=h[1],b=h[2],w=g-b-s*y;(y||w)&&Mo(e,c)&&(p+=w,m+=y);var P=c.parentNode;c=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!u&&c!==document.body||u&&(t.contains(c)||t===c));return(d&&Math.abs(p)<1||!d&&Math.abs(m)<1)&&(f=!0),f},vt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ar=function(e){return[e.deltaX,e.deltaY]},jr=function(e){return e&&"current"in e?e.current:e},$d=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Bd=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Vd=0,$e=[];function zd(e){var t=l.useRef([]),n=l.useRef([0,0]),r=l.useRef(),o=l.useState(Vd++)[0],s=l.useState(jo)[0],a=l.useRef(e);l.useEffect(function(){a.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=ld([e.lockRef.current],(e.shards||[]).map(jr),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=l.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var w=vt(g),P=n.current,x="deltaX"in g?g.deltaX:P[0]-w[0],v="deltaY"in g?g.deltaY:P[1]-w[1],E,_=g.target,C=Math.abs(x)>Math.abs(v)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var T=window.getSelection(),j=T&&T.anchorNode,N=j?j===_||j.contains(_):!1;if(N)return!1;var D=Dr(C,_);if(!D)return!0;if(D?E=C:(E=C==="v"?"h":"v",D=Dr(C,_)),!D)return!1;if(!r.current&&"changedTouches"in g&&(x||v)&&(r.current=E),!E)return!0;var F=r.current||E;return kd(F,b,g,F==="h"?x:v)},[]),u=l.useCallback(function(g){var b=g;if(!(!$e.length||$e[$e.length-1]!==s)){var w="deltaY"in b?Ar(b):vt(b),P=t.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&$d(E.delta,w)})[0];if(P&&P.should){b.cancelable&&b.preventDefault();return}if(!P){var x=(a.current.shards||[]).map(jr).filter(Boolean).filter(function(E){return E.contains(b.target)}),v=x.length>0?c(b,x[0]):!a.current.noIsolation;v&&b.cancelable&&b.preventDefault()}}},[]),f=l.useCallback(function(g,b,w,P){var x={name:g,delta:b,target:w,should:P,shadowParent:Ud(w)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(v){return v!==x})},1)},[]),d=l.useCallback(function(g){n.current=vt(g),r.current=void 0},[]),p=l.useCallback(function(g){f(g.type,Ar(g),g.target,c(g,e.lockRef.current))},[]),m=l.useCallback(function(g){f(g.type,vt(g),g.target,c(g,e.lockRef.current))},[]);l.useEffect(function(){return $e.push(s),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",u,ke),document.addEventListener("touchmove",u,ke),document.addEventListener("touchstart",d,ke),function(){$e=$e.filter(function(g){return g!==s}),document.removeEventListener("wheel",u,ke),document.removeEventListener("touchmove",u,ke),document.removeEventListener("touchstart",d,ke)}},[]);var h=e.removeScrollBar,y=e.inert;return l.createElement(l.Fragment,null,y?l.createElement(s,{styles:Bd(o)}):null,h?l.createElement(Ad,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ud(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Wd=vd(Ao,zd);var Fn=l.forwardRef(function(e,t){return l.createElement(Bt,xe({},e,{ref:t,sideCar:Wd}))});Fn.classNames=Bt.classNames;var Hd=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Be=new WeakMap,yt=new WeakMap,wt={},un=0,Lo=function(e){return e&&(e.host||Lo(e.parentNode))},Kd=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Lo(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qd=function(e,t,n,r){var o=Kd(t,Array.isArray(e)?e:[e]);wt[n]||(wt[n]=new WeakMap);var s=wt[n],a=[],c=new Set,u=new Set(o),f=function(p){!p||c.has(p)||(c.add(p),f(p.parentNode))};o.forEach(f);var d=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(m){if(c.has(m))d(m);else try{var h=m.getAttribute(r),y=h!==null&&h!=="false",g=(Be.get(m)||0)+1,b=(s.get(m)||0)+1;Be.set(m,g),s.set(m,b),a.push(m),g===1&&y&&yt.set(m,!0),b===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(t),c.clear(),un++,function(){a.forEach(function(p){var m=Be.get(p)-1,h=s.get(p)-1;Be.set(p,m),s.set(p,h),m||(yt.has(p)||p.removeAttribute(r),yt.delete(p)),h||p.removeAttribute(n)}),un--,un||(Be=new WeakMap,Be=new WeakMap,yt=new WeakMap,wt={})}},Fo=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Hd(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),qd(r,o,n,"aria-hidden")):function(){return null}};function Gd(e){const t=Qd(e),n=l.forwardRef((r,o)=>{const{children:s,...a}=r,c=l.Children.toArray(s),u=c.find(Yd);if(u){const f=u.props.children,d=c.map(p=>p===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:p);return i.jsx(t,{...a,ref:o,children:l.isValidElement(f)?l.cloneElement(f,void 0,d):null})}return i.jsx(t,{...a,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Qd(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const a=Zd(o),c=Jd(s,o.props);return o.type!==l.Fragment&&(c.ref=r?Ge(r,a):a),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xd=Symbol("radix.slottable");function Yd(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xd}function Jd(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...c)=>{const u=s(...c);return o(...c),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Zd(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Vt="Dialog",[ko]=Oe(Vt),[ef,he]=ko(Vt),$o=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:a=!0}=e,c=l.useRef(null),u=l.useRef(null),[f,d]=In({prop:r,defaultProp:o??!1,onChange:s,caller:Vt});return i.jsx(ef,{scope:t,triggerRef:c,contentRef:u,contentId:ze(),titleId:ze(),descriptionId:ze(),open:f,onOpenChange:d,onOpenToggle:l.useCallback(()=>d(p=>!p),[d]),modal:a,children:n})};$o.displayName=Vt;var Bo="DialogTrigger",tf=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=he(Bo,n),s=G(t,o.triggerRef);return i.jsx(K.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Bn(o.open),...r,ref:s,onClick:M(e.onClick,o.onOpenToggle)})});tf.displayName=Bo;var kn="DialogPortal",[nf,Vo]=ko(kn,{forceMount:void 0}),zo=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=he(kn,t);return i.jsx(nf,{scope:t,forceMount:n,children:l.Children.map(r,a=>i.jsx(ue,{present:n||s.open,children:i.jsx(Ln,{asChild:!0,container:o,children:a})}))})};zo.displayName=kn;var Dt="DialogOverlay",Uo=l.forwardRef((e,t)=>{const n=Vo(Dt,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=he(Dt,e.__scopeDialog);return s.modal?i.jsx(ue,{present:r||s.open,children:i.jsx(of,{...o,ref:t})}):null});Uo.displayName=Dt;var rf=Gd("DialogOverlay.RemoveScroll"),of=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=he(Dt,n);return i.jsx(Fn,{as:rf,allowPinchZoom:!0,shards:[o.contentRef],children:i.jsx(K.div,{"data-state":Bn(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ie="DialogContent",Wo=l.forwardRef((e,t)=>{const n=Vo(Ie,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=he(Ie,e.__scopeDialog);return i.jsx(ue,{present:r||s.open,children:s.modal?i.jsx(sf,{...o,ref:t}):i.jsx(af,{...o,ref:t})})});Wo.displayName=Ie;var sf=l.forwardRef((e,t)=>{const n=he(Ie,e.__scopeDialog),r=l.useRef(null),o=G(t,n.contentRef,r);return l.useEffect(()=>{const s=r.current;if(s)return Fo(s)},[]),i.jsx(Ho,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:M(e.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:M(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:M(e.onFocusOutside,s=>s.preventDefault())})}),af=l.forwardRef((e,t)=>{const n=he(Ie,e.__scopeDialog),r=l.useRef(!1),o=l.useRef(!1);return i.jsx(Ho,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Ho=l.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...a}=e,c=he(Ie,n),u=l.useRef(null),f=G(t,u);return Ro(),i.jsxs(i.Fragment,{children:[i.jsx(On,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:i.jsx(Mn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Bn(c.open),...a,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(cf,{titleId:c.titleId}),i.jsx(uf,{contentRef:u,descriptionId:c.descriptionId})]})]})}),$n="DialogTitle",Ko=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=he($n,n);return i.jsx(K.h2,{id:o.titleId,...r,ref:t})});Ko.displayName=$n;var qo="DialogDescription",Go=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=he(qo,n);return i.jsx(K.p,{id:o.descriptionId,...r,ref:t})});Go.displayName=qo;var Qo="DialogClose",Xo=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=he(Qo,n);return i.jsx(K.button,{type:"button",...r,ref:t,onClick:M(e.onClick,()=>o.onOpenChange(!1))})});Xo.displayName=Qo;function Bn(e){return e?"open":"closed"}var Yo="DialogTitleWarning",[qh,Jo]=Du(Yo,{contentName:Ie,titleName:$n,docsSlug:"dialog"}),cf=({titleId:e})=>{const t=Jo(Yo),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},lf="DialogDescriptionWarning",uf=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jo(lf).contentName}}.`;return l.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},df=$o,ff=zo,Zo=Uo,es=Wo,ts=Ko,ns=Go,pf=Xo;const mf=df,hf=ff,rs=l.forwardRef(({className:e,...t},n)=>i.jsx(Zo,{ref:n,className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));rs.displayName=Zo.displayName;const os=l.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(hf,{children:[i.jsx(rs,{}),i.jsxs(es,{ref:r,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(pf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(En,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));os.displayName=es.displayName;const ss=({className:e,...t})=>i.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ss.displayName="DialogHeader";const is=({className:e,...t})=>i.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});is.displayName="DialogFooter";const as=l.forwardRef(({className:e,...t},n)=>i.jsx(ts,{ref:n,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));as.displayName=ts.displayName;const cs=l.forwardRef(({className:e,...t},n)=>i.jsx(ns,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));cs.displayName=ns.displayName;var gf=l.createContext(void 0);function Vn(e){const t=l.useContext(gf);return e||t||"ltr"}function xf(e,[t,n]){return Math.min(n,Math.max(t,e))}function vf(e,t){return l.useReducer((n,r)=>t[n][r]??n,e)}var zn="ScrollArea",[ls]=Oe(zn),[yf,de]=ls(zn),us=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...a}=e,[c,u]=l.useState(null),[f,d]=l.useState(null),[p,m]=l.useState(null),[h,y]=l.useState(null),[g,b]=l.useState(null),[w,P]=l.useState(0),[x,v]=l.useState(0),[E,_]=l.useState(!1),[C,T]=l.useState(!1),j=G(t,D=>u(D)),N=Vn(o);return i.jsx(yf,{scope:n,type:r,dir:N,scrollHideDelay:s,scrollArea:c,viewport:f,onViewportChange:d,content:p,onContentChange:m,scrollbarX:h,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:C,onScrollbarYEnabledChange:T,onCornerWidthChange:P,onCornerHeightChange:v,children:i.jsx(K.div,{dir:N,...a,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});us.displayName=zn;var ds="ScrollAreaViewport",fs=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,a=de(ds,n),c=l.useRef(null),u=G(t,c,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),i.jsx(K.div,{"data-radix-scroll-area-viewport":"",...s,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});fs.displayName=ds;var Se="ScrollAreaScrollbar",Un=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=de(Se,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=o,c=e.orientation==="horizontal";return l.useEffect(()=>(c?s(!0):a(!0),()=>{c?s(!1):a(!1)}),[c,s,a]),o.type==="hover"?i.jsx(wf,{...r,ref:t,forceMount:n}):o.type==="scroll"?i.jsx(bf,{...r,ref:t,forceMount:n}):o.type==="auto"?i.jsx(ps,{...r,ref:t,forceMount:n}):o.type==="always"?i.jsx(Wn,{...r,ref:t}):null});Un.displayName=Se;var wf=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=de(Se,e.__scopeScrollArea),[s,a]=l.useState(!1);return l.useEffect(()=>{const c=o.scrollArea;let u=0;if(c){const f=()=>{window.clearTimeout(u),a(!0)},d=()=>{u=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),i.jsx(ue,{present:n||s,children:i.jsx(ps,{"data-state":s?"visible":"hidden",...r,ref:t})})}),bf=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=de(Se,e.__scopeScrollArea),s=e.orientation==="horizontal",a=Ut(()=>u("SCROLL_END"),100),[c,u]=vf("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,o.scrollHideDelay,u]),l.useEffect(()=>{const f=o.viewport,d=s?"scrollLeft":"scrollTop";if(f){let p=f[d];const m=()=>{const h=f[d];p!==h&&(u("SCROLL"),a()),p=h};return f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[o.viewport,s,u,a]),i.jsx(ue,{present:n||c!=="hidden",children:i.jsx(Wn,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:M(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:M(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),ps=l.forwardRef((e,t)=>{const n=de(Se,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,a]=l.useState(!1),c=e.orientation==="horizontal",u=Ut(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;a(c?f:d)}},10);return Ke(n.viewport,u),Ke(n.content,u),i.jsx(ue,{present:r||s,children:i.jsx(Wn,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Wn=l.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=de(Se,e.__scopeScrollArea),s=l.useRef(null),a=l.useRef(0),[c,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=vs(c.viewport,c.content),d={...r,sizes:c,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:m=>s.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function p(m,h){return _f(m,a.current,c,h)}return n==="horizontal"?i.jsx(Sf,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollLeft,h=Ir(m,c,o.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollLeft=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollLeft=p(m,o.dir))}}):n==="vertical"?i.jsx(Cf,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollTop,h=Ir(m,c);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollTop=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollTop=p(m))}}):null}),Sf=l.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=de(Se,e.__scopeScrollArea),[a,c]=l.useState(),u=l.useRef(null),f=G(t,u,s.onScrollbarXChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),i.jsx(hs,{"data-orientation":"horizontal",...o,ref:f,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":zt(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,p)=>{if(s.viewport){const m=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),ws(m,p)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:jt(a.paddingLeft),paddingEnd:jt(a.paddingRight)}})}})}),Cf=l.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=de(Se,e.__scopeScrollArea),[a,c]=l.useState(),u=l.useRef(null),f=G(t,u,s.onScrollbarYChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),i.jsx(hs,{"data-orientation":"vertical",...o,ref:f,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":zt(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,p)=>{if(s.viewport){const m=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),ws(m,p)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:jt(a.paddingTop),paddingEnd:jt(a.paddingBottom)}})}})}),[Pf,ms]=ls(Se),hs=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:f,onWheelScroll:d,onResize:p,...m}=e,h=de(Se,n),[y,g]=l.useState(null),b=G(t,j=>g(j)),w=l.useRef(null),P=l.useRef(""),x=h.viewport,v=r.content-r.viewport,E=re(d),_=re(u),C=Ut(p,10);function T(j){if(w.current){const N=j.clientX-w.current.left,D=j.clientY-w.current.top;f({x:N,y:D})}}return l.useEffect(()=>{const j=N=>{const D=N.target;y?.contains(D)&&E(N,v)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[x,y,v,E]),l.useEffect(_,[r,_]),Ke(y,C),Ke(h.content,C),i.jsx(Pf,{scope:n,scrollbar:y,hasThumb:o,onThumbChange:re(s),onThumbPointerUp:re(a),onThumbPositionChange:_,onThumbPointerDown:re(c),children:i.jsx(K.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:M(e.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),w.current=y.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(j))}),onPointerMove:M(e.onPointerMove,T),onPointerUp:M(e.onPointerUp,j=>{const N=j.target;N.hasPointerCapture(j.pointerId)&&N.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=P.current,h.viewport&&(h.viewport.style.scrollBehavior=""),w.current=null})})})}),At="ScrollAreaThumb",gs=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ms(At,e.__scopeScrollArea);return i.jsx(ue,{present:n||o.hasThumb,children:i.jsx(Nf,{ref:t,...r})})}),Nf=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=de(At,n),a=ms(At,n),{onThumbPositionChange:c}=a,u=G(t,p=>a.onThumbChange(p)),f=l.useRef(void 0),d=Ut(()=>{f.current&&(f.current(),f.current=void 0)},100);return l.useEffect(()=>{const p=s.viewport;if(p){const m=()=>{if(d(),!f.current){const h=Rf(p,c);f.current=h,c()}};return c(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[s.viewport,d,c]),i.jsx(K.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:M(e.onPointerDownCapture,p=>{const h=p.target.getBoundingClientRect(),y=p.clientX-h.left,g=p.clientY-h.top;a.onThumbPointerDown({x:y,y:g})}),onPointerUp:M(e.onPointerUp,a.onThumbPointerUp)})});gs.displayName=At;var Hn="ScrollAreaCorner",xs=l.forwardRef((e,t)=>{const n=de(Hn,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Ef,{...e,ref:t}):null});xs.displayName=Hn;var Ef=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=de(Hn,n),[s,a]=l.useState(0),[c,u]=l.useState(0),f=!!(s&&c);return Ke(o.scrollbarX,()=>{const d=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(d),u(d)}),Ke(o.scrollbarY,()=>{const d=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(d),a(d)}),f?i.jsx(K.div,{...r,ref:t,style:{width:s,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function jt(e){return e?parseInt(e,10):0}function vs(e,t){const n=e/t;return isNaN(n)?0:n}function zt(e){const t=vs(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function _f(e,t,n,r="ltr"){const o=zt(n),s=o/2,a=t||s,c=o-a,u=n.scrollbar.paddingStart+a,f=n.scrollbar.size-n.scrollbar.paddingEnd-c,d=n.content-n.viewport,p=r==="ltr"?[0,d]:[d*-1,0];return ys([u,f],p)(e)}function Ir(e,t,n="ltr"){const r=zt(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,a=t.content-t.viewport,c=s-r,u=n==="ltr"?[0,a]:[a*-1,0],f=xf(e,u);return ys([0,a],[0,c])(f)}function ys(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ws(e,t){return e>0&&e<t}var Rf=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const s={left:e.scrollLeft,top:e.scrollTop},a=n.left!==s.left,c=n.top!==s.top;(a||c)&&t(),n=s,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function Ut(e,t){const n=re(e),r=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),l.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ke(e,t){const n=re(t);Pe(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var bs=us,Tf=fs,Df=xs;const Ss=l.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(bs,{ref:r,className:Q("relative overflow-hidden",e),...n,children:[i.jsx(Tf,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Cs,{}),i.jsx(Df,{})]}));Ss.displayName=bs.displayName;const Cs=l.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(Un,{ref:r,orientation:t,className:Q("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(gs,{className:"relative flex-1 rounded-full bg-border"})}));Cs.displayName=Un.displayName;function Mr({open:e,files:t,onComplete:n}){const r=t.length>0&&t.every(u=>u.status==="success"||u.status==="error"),o=t.some(u=>u.status==="error"),s=t.filter(u=>u.status==="success").length,a=t.filter(u=>u.status==="error").length,c=t.length>0?t.reduce((u,f)=>u+f.progress,0)/t.length:0;return t.some(u=>u.status==="uploading"||u.status==="pending"),i.jsx(mf,{open:e,onOpenChange:u=>{!u&&r&&n()},children:i.jsxs(os,{className:"sm:max-w-2xl max-h-[80vh]",children:[i.jsxs(ss,{children:[i.jsx(as,{className:"flex items-center gap-2 text-lg",children:r?o?i.jsxs(i.Fragment,{children:[i.jsx(cr,{className:"h-5 w-5 text-yellow-500"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"h-5 w-5 text-green-500"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx(ot,{className:"h-5 w-5"}),""]})}),i.jsx(cs,{className:"text-base",children:r?i.jsxs(i.Fragment,{children:[s>0&&i.jsxs("span",{className:"text-green-600 font-medium",children:[s," "]}),s>0&&a>0&&i.jsx("span",{children:""}),a>0&&i.jsxs("span",{className:"text-red-600 font-medium",children:[a," "]})]}):` ${t.length} ...`})]}),i.jsxs("div",{className:"space-y-4",children:[!r&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[Math.round(c),"%"]})]}),i.jsx(He,{value:c,className:"h-2"})]}),i.jsx(Ss,{className:"h-64 pr-4",children:i.jsx("div",{className:"space-y-2",children:t.map((u,f)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[u.status==="success"?i.jsx(mn,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}):u.status==="error"?i.jsx(cr,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}):i.jsx(ot,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:u.name}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:[(u.size/1024/1024).toFixed(2)," MB"]}),u.status==="uploading"&&i.jsxs("span",{className:"text-xs text-primary font-medium",children:[u.progress,"%"]})]}),u.status==="error"&&u.error&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:u.error}),u.status==="uploading"&&i.jsx(He,{value:u.progress,className:"h-1.5 mt-2"})]})]},f))})})]}),i.jsx(is,{className:"gap-2",children:r?i.jsx(oe,{onClick:n,className:o?"min-w-[120px]":"bg-green-600 hover:bg-green-700 min-w-[120px]",size:"lg",children:""}):i.jsx(oe,{disabled:!0,variant:"secondary",className:"min-w-[120px]",size:"lg",children:"..."})})]})})}var Af={};function Or(e){const t=["application/pdf"],n=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12"],r=[".pdf"],o=[".xls",".xlsx",".xlsm",".xlsb"],s=e.name.toLowerCase(),a=t.includes(e.type)||r.some(u=>s.endsWith(u)),c=n.includes(e.type)||o.some(u=>s.endsWith(u));return a||c}function Lr(e){const t=e.name.toLowerCase();return t.endsWith(".pdf")||e.type==="application/pdf"?"text-red-500":[".xls",".xlsx",".xlsm",".xlsb"].some(n=>t.endsWith(n))?"text-green-500":"text-gray-500"}function Fr({onUploadComplete:e,folderId:t,compact:n=!1}){const[r,o]=l.useState(!1),[s,a]=l.useState([]),[c,u]=l.useState(!1),[f,d]=l.useState(!1),{toast:p}=Nn(),m=l.useCallback(x=>{x.preventDefault(),o(!0)},[]),h=l.useCallback(x=>{x.preventDefault(),o(!1)},[]),y=l.useCallback(x=>{x.preventDefault(),o(!1);const v=Array.from(x.dataTransfer.files);console.log("[Upload] :",v.map(C=>({name:C.name,type:C.type})));const E=v.filter(C=>{const T=Or(C);return console.log(`[Upload]  ${C.name} :`,T),T});if(E.length===0){p({title:"",description:"PDFExcel.xls, .xlsx, .xlsm",variant:"destructive"});return}console.log("[Upload] :",E.length);const _=E.map(C=>({file:C,progress:0,status:"pending"}));console.log("[Upload] :",_.map(C=>C.file.name)),a(C=>[...C,..._])},[p]),g=l.useCallback(x=>{const v=x.target.files;if(!v||v.length===0)return;console.log("[Upload] :",Array.from(v).map(_=>({name:_.name,type:_.type})));const E=Array.from(v).filter(_=>{const C=Or(_);return console.log(`[Upload]  ${_.name} :`,C),C}).map(_=>({file:_,progress:0,status:"pending"}));if(E.length===0){p({title:"",description:"PDFExcel.xls, .xlsx, .xlsm",variant:"destructive"});return}console.log("[Upload] :",E.map(_=>_.file.name)),a(_=>[..._,...E])},[p]);l.useEffect(()=>{const x=s.some(v=>v.status==="pending");console.log("[Upload] :",{uploadFilesCount:s.length,hasPendingFiles:x,isUploading:f,uploadFiles:s.map(v=>({name:v.file.name,status:v.status}))}),x&&!f&&(console.log("[Upload] "),w())},[s,f]),l.useEffect(()=>{const x=s.length>0&&s.every(E=>E.status==="success"||E.status==="error"),v=s.some(E=>E.status==="uploading"||E.status==="pending");if(console.log("[Upload Debug] allComplete:",x,"showProgressDialog:",c,"hasUploading:",v,"isUploading:",f),x&&c&&!v){console.log("[Upload Debug] Setting auto-close timer");const E=setTimeout(()=>{console.log("[Upload Debug] Auto-closing dialog"),u(!1),a([]),t&&sessionStorage.setItem("lastSelectedFolderId",t)},5e3);return()=>{console.log("[Upload Debug] Clearing timer"),clearTimeout(E)}}},[s,c,f,t]);const b=l.useCallback(x=>{a(v=>v.filter((E,_)=>_!==x))},[]),w=async()=>{const x=s.filter(v=>v.status==="pending");x.length!==0&&(d(!0),u(!0),a(v=>v.map(E=>E.status==="pending"?{...E,status:"uploading",progress:0}:E)),await Promise.all(x.map(async(v,E)=>{const _=s.findIndex(C=>C.file===v.file);try{console.log("[Upload Client] :",v.file.name);const C=new FormData;C.append("file",v.file),t&&C.append("folderId",t);let T;if(await new Promise((D,F)=>{const R=new XMLHttpRequest;R.upload.addEventListener("progress",I=>{if(I.lengthComputable){const k=Math.round(I.loaded/I.total*100);a($=>$.map((U,O)=>O===_?{...U,progress:k}:U))}}),R.addEventListener("load",()=>{if(console.log("[Upload Client] XHR load ",{status:R.status,statusText:R.statusText,responseType:R.responseType,responseText:R.responseText}),R.status===200){try{T=JSON.parse(R.responseText),console.log("[Upload Client] ",T)}catch(I){console.error("[Upload Client] ",I)}a(I=>I.map((k,$)=>$===_?{...k,status:"success",progress:100}:k)),T?.parseError&&console.warn("[Upload Client] ",T.parseError),D()}else{console.error("[Upload Client] ",{status:R.status,statusText:R.statusText,responseText:R.responseText});let I="";try{const k=JSON.parse(R.responseText);console.log("[Upload Client] ",k),k.error===""?I="":k.error&&(I=k.error)}catch(k){console.error("[Upload Client] ",k),R.status===409&&(I="")}F(new Error(I))}}),R.addEventListener("error",()=>{console.error("[Upload Client] XHR error ",{readyState:R.readyState,status:R.status,statusText:R.statusText}),F(new Error(""))}),R.addEventListener("abort",()=>{console.error("[Upload Client] XHR abort "),F(new Error(""))}),R.open("POST",`${Af.NEXT_PUBLIC_UPLOAD_SERVER_URL||"http://localhost:3001"}/upload`),R.send(C)}),T?.data?.filename){let D;if(v.file.type==="application/pdf"||v.file.name.toLowerCase().endsWith(".pdf"))try{console.log("[Upload Client]  Blob");const R=new FormData;R.append("file",v.file);const I=await fetch("/api/upload-temp-blob",{method:"POST",body:R});I.ok?(D=(await I.json()).data?.url,console.log("[Upload Client]  Blob :",D)):console.warn("[Upload Client]  Blob ")}catch(R){console.warn("[Upload Client]  Blob :",R)}try{const R=await fetch("/api/save-file-meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.file.name,folderId:t,serverFilename:T.data.filename,serverUrl:T.data.url,size:T.data.size,mimeType:T.data.mimetype,hash:T.data.hash,tempBlobUrl:D})});if(R.ok)console.log("[Upload Client] ");else{const I=await R.json();console.warn("[Upload Client] ",I),T={...T,parseError:`: ${I.error||R.statusText}`}}}catch(R){console.warn("[Upload Client] ",R),T={...T,parseError:`: ${R instanceof Error?R.message:""}`}}}const j=T?.parseError?`${v.file.name} `:`${v.file.name} `,N=T?.parseError?"":"";p({title:N,description:j,...T?.parseError&&{variant:"default"}})}catch(C){const T=C instanceof Error?C.message:"";console.error("[Upload Client]  :",{fileName:v.file.name,error:C,errorMessage:T}),a(j=>j.map((N,D)=>D===_?{...N,status:"error",error:T}:N)),p({title:"",description:`${v.file.name}: ${T}`,variant:"destructive"})}})),e?.(),d(!1))},P=()=>{u(!1),a([]),t&&sessionStorage.setItem("lastSelectedFolderId",t),e?.()};return s.length>0&&s.reduce((x,v)=>x+v.progress,0)/s.length,s.some(x=>x.status==="pending"),n?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"file",accept:".pdf,.xls,.xlsx,.xlsm,.xlsb,application/pdf,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",multiple:!0,onChange:g,className:"hidden",id:"file-upload-compact",disabled:f}),i.jsx("label",{htmlFor:"file-upload-compact",children:i.jsx(oe,{variant:"outline",size:"sm",className:"w-full justify-start",asChild:!0,disabled:f,children:i.jsxs("span",{children:[i.jsx(ot,{className:"h-4 w-4 mr-2"}),f?"...":""]})})}),s.length>0&&i.jsx("div",{className:"space-y-2",children:s.map((x,v)=>i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx(rt,{className:`h-3 w-3 ${Lr(x.file)} flex-shrink-0`}),i.jsx("span",{className:"flex-1 truncate",children:x.file.name}),x.status==="success"&&i.jsx("span",{className:"text-green-500",children:""}),x.status==="error"&&i.jsx("span",{className:"text-red-500",children:""})]},v))})]}),i.jsx(Mr,{open:c,files:s.map(x=>({name:x.file.name,size:x.file.size,status:x.status,progress:x.progress,error:x.error})),onComplete:P})]}):i.jsxs(i.Fragment,{children:[i.jsx(Yr,{className:"w-full",children:i.jsx(Jr,{className:"pt-6",children:s.length===0?i.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${r?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:m,onDragLeave:h,onDrop:y,children:[i.jsx(ot,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"PDFExcel"}),i.jsx("input",{type:"file",accept:".pdf,.xls,.xlsx,.xlsm,.xlsb,application/pdf,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",multiple:!0,onChange:g,className:"hidden",id:"file-upload",disabled:f}),i.jsx("label",{htmlFor:"file-upload",children:i.jsx(oe,{variant:"outline",size:"sm",asChild:!0,disabled:f,children:i.jsx("span",{children:""})})})]}):i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"space-y-2",children:s.map((x,v)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[i.jsx(rt,{className:`h-8 w-8 ${Lr(x.file)} flex-shrink-0`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:x.file.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(x.file.size/1024/1024).toFixed(2)," MB"]}),x.status==="uploading"&&i.jsx(He,{value:x.progress,className:"h-1 mt-1"}),x.status==="success"&&i.jsx("p",{className:"text-xs text-green-500 mt-1",children:""}),x.status==="error"&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:x.error})]}),i.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>b(v),disabled:x.status==="uploading"||x.status==="success",children:i.jsx(En,{className:"h-4 w-4"})})]},v))})})})}),i.jsx(Mr,{open:c,files:s.map(x=>({name:x.file.name,size:x.file.size,status:x.status,progress:x.progress,error:x.error})),onComplete:P})]})}function kr(e){const t=jf(e),n=l.forwardRef((r,o)=>{const{children:s,...a}=r,c=l.Children.toArray(s),u=c.find(Mf);if(u){const f=u.props.children,d=c.map(p=>p===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:p);return i.jsx(t,{...a,ref:o,children:l.isValidElement(f)?l.cloneElement(f,void 0,d):null})}return i.jsx(t,{...a,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function jf(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const a=Lf(o),c=Of(s,o.props);return o.type!==l.Fragment&&(c.ref=r?Ge(r,a):a),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var If=Symbol("radix.slottable");function Mf(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===If}function Of(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...c)=>{const u=s(...c);return o(...c),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Lf(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ps(e){const t=e+"CollectionProvider",[n,r]=Oe(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:b,children:w}=g,P=je.useRef(null),x=je.useRef(new Map).current;return i.jsx(o,{scope:b,itemMap:x,collectionRef:P,children:w})};a.displayName=t;const c=e+"CollectionSlot",u=kr(c),f=je.forwardRef((g,b)=>{const{scope:w,children:P}=g,x=s(c,w),v=G(b,x.collectionRef);return i.jsx(u,{ref:v,children:P})});f.displayName=c;const d=e+"CollectionItemSlot",p="data-radix-collection-item",m=kr(d),h=je.forwardRef((g,b)=>{const{scope:w,children:P,...x}=g,v=je.useRef(null),E=G(b,v),_=s(d,w);return je.useEffect(()=>(_.itemMap.set(v,{ref:v,...x}),()=>void _.itemMap.delete(v))),i.jsx(m,{[p]:"",ref:E,children:P})});h.displayName=d;function y(g){const b=s(e+"CollectionConsumer",g);return je.useCallback(()=>{const P=b.collectionRef.current;if(!P)return[];const x=Array.from(P.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((_,C)=>x.indexOf(_.ref.current)-x.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:f,ItemSlot:h},y,r]}const Ff=["top","right","bottom","left"],Re=Math.min,ae=Math.max,It=Math.round,bt=Math.floor,we=e=>({x:e,y:e}),kf={left:"right",right:"left",bottom:"top",top:"bottom"},$f={start:"end",end:"start"};function wn(e,t,n){return ae(e,Re(t,n))}function Ne(e,t){return typeof e=="function"?e(t):e}function Ee(e){return e.split("-")[0]}function Qe(e){return e.split("-")[1]}function Kn(e){return e==="x"?"y":"x"}function qn(e){return e==="y"?"height":"width"}const Bf=new Set(["top","bottom"]);function ye(e){return Bf.has(Ee(e))?"y":"x"}function Gn(e){return Kn(ye(e))}function Vf(e,t,n){n===void 0&&(n=!1);const r=Qe(e),o=Gn(e),s=qn(o);let a=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Mt(a)),[a,Mt(a)]}function zf(e){const t=Mt(e);return[bn(e),t,bn(t)]}function bn(e){return e.replace(/start|end/g,t=>$f[t])}const $r=["left","right"],Br=["right","left"],Uf=["top","bottom"],Wf=["bottom","top"];function Hf(e,t,n){switch(e){case"top":case"bottom":return n?t?Br:$r:t?$r:Br;case"left":case"right":return t?Uf:Wf;default:return[]}}function Kf(e,t,n,r){const o=Qe(e);let s=Hf(Ee(e),n==="start",r);return o&&(s=s.map(a=>a+"-"+o),t&&(s=s.concat(s.map(bn)))),s}function Mt(e){return e.replace(/left|right|bottom|top/g,t=>kf[t])}function qf(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ns(e){return typeof e!="number"?qf(e):{top:e,right:e,bottom:e,left:e}}function Ot(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Vr(e,t,n){let{reference:r,floating:o}=e;const s=ye(t),a=Gn(t),c=qn(a),u=Ee(t),f=s==="y",d=r.x+r.width/2-o.width/2,p=r.y+r.height/2-o.height/2,m=r[c]/2-o[c]/2;let h;switch(u){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:p};break;case"left":h={x:r.x-o.width,y:p};break;default:h={x:r.x,y:r.y}}switch(Qe(t)){case"start":h[a]-=m*(n&&f?-1:1);break;case"end":h[a]+=m*(n&&f?-1:1);break}return h}async function Gf(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:a,elements:c,strategy:u}=e,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:h=0}=Ne(t,e),y=Ns(h),b=c[m?p==="floating"?"reference":"floating":p],w=Ot(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:f,rootBoundary:d,strategy:u})),P=p==="floating"?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),v=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},E=Ot(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:P,offsetParent:x,strategy:u}):P);return{top:(w.top-E.top+y.top)/v.y,bottom:(E.bottom-w.bottom+y.bottom)/v.y,left:(w.left-E.left+y.left)/v.x,right:(E.right-w.right+y.right)/v.x}}const Qf=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:a}=n,c=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let f=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:p}=Vr(f,r,u),m=r,h={},y=0;for(let b=0;b<c.length;b++){var g;const{name:w,fn:P}=c[b],{x,y:v,data:E,reset:_}=await P({x:d,y:p,initialPlacement:r,placement:m,strategy:o,middlewareData:h,rects:f,platform:{...a,detectOverflow:(g=a.detectOverflow)!=null?g:Gf},elements:{reference:e,floating:t}});d=x??d,p=v??p,h={...h,[w]:{...h[w],...E}},_&&y<=50&&(y++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(f=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:d,y:p}=Vr(f,m,u)),b=-1)}return{x:d,y:p,placement:m,strategy:o,middlewareData:h}},Xf=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:a,elements:c,middlewareData:u}=t,{element:f,padding:d=0}=Ne(e,t)||{};if(f==null)return{};const p=Ns(d),m={x:n,y:r},h=Gn(o),y=qn(h),g=await a.getDimensions(f),b=h==="y",w=b?"top":"left",P=b?"bottom":"right",x=b?"clientHeight":"clientWidth",v=s.reference[y]+s.reference[h]-m[h]-s.floating[y],E=m[h]-s.reference[h],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(f));let C=_?_[x]:0;(!C||!await(a.isElement==null?void 0:a.isElement(_)))&&(C=c.floating[x]||s.floating[y]);const T=v/2-E/2,j=C/2-g[y]/2-1,N=Re(p[w],j),D=Re(p[P],j),F=N,R=C-g[y]-D,I=C/2-g[y]/2+T,k=wn(F,I,R),$=!u.arrow&&Qe(o)!=null&&I!==k&&s.reference[y]/2-(I<F?N:D)-g[y]/2<0,U=$?I<F?I-F:I-R:0;return{[h]:m[h]+U,data:{[h]:k,centerOffset:I-k-U,...$&&{alignmentOffset:U}},reset:$}}}),Yf=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:a,initialPlacement:c,platform:u,elements:f}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...b}=Ne(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=Ee(o),P=ye(c),x=Ee(c)===c,v=await(u.isRTL==null?void 0:u.isRTL(f.floating)),E=m||(x||!g?[Mt(c)]:zf(c)),_=y!=="none";!m&&_&&E.push(...Kf(c,g,y,v));const C=[c,...E],T=await u.detectOverflow(t,b),j=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&j.push(T[w]),p){const I=Vf(o,a,v);j.push(T[I[0]],T[I[1]])}if(N=[...N,{placement:o,overflows:j}],!j.every(I=>I<=0)){var D,F;const I=(((D=s.flip)==null?void 0:D.index)||0)+1,k=C[I];if(k&&(!(p==="alignment"?P!==ye(k):!1)||N.every(O=>ye(O.placement)===P?O.overflows[0]>0:!0)))return{data:{index:I,overflows:N},reset:{placement:k}};let $=(F=N.filter(U=>U.overflows[0]<=0).sort((U,O)=>U.overflows[1]-O.overflows[1])[0])==null?void 0:F.placement;if(!$)switch(h){case"bestFit":{var R;const U=(R=N.filter(O=>{if(_){const A=ye(O.placement);return A===P||A==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(A=>A>0).reduce((A,ee)=>A+ee,0)]).sort((O,A)=>O[1]-A[1])[0])==null?void 0:R[0];U&&($=U);break}case"initialPlacement":$=c;break}if(o!==$)return{reset:{placement:$}}}return{}}}};function zr(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ur(e){return Ff.some(t=>e[t]>=0)}const Jf=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:o="referenceHidden",...s}=Ne(e,t);switch(o){case"referenceHidden":{const a=await r.detectOverflow(t,{...s,elementContext:"reference"}),c=zr(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Ur(c)}}}case"escaped":{const a=await r.detectOverflow(t,{...s,altBoundary:!0}),c=zr(a,n.floating);return{data:{escapedOffsets:c,escaped:Ur(c)}}}default:return{}}}}},Es=new Set(["left","top"]);async function Zf(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=Ee(n),c=Qe(n),u=ye(n)==="y",f=Es.has(a)?-1:1,d=s&&u?-1:1,p=Ne(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof y=="number"&&(h=c==="end"?y*-1:y),u?{x:h*d,y:m*f}:{x:m*f,y:h*d}}const ep=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:a,middlewareData:c}=t,u=await Zf(t,e);return a===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:s+u.y,data:{...u,placement:a}}}}},tp=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o,platform:s}=t,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:w=>{let{x:P,y:x}=w;return{x:P,y:x}}},...f}=Ne(e,t),d={x:n,y:r},p=await s.detectOverflow(t,f),m=ye(Ee(o)),h=Kn(m);let y=d[h],g=d[m];if(a){const w=h==="y"?"top":"left",P=h==="y"?"bottom":"right",x=y+p[w],v=y-p[P];y=wn(x,y,v)}if(c){const w=m==="y"?"top":"left",P=m==="y"?"bottom":"right",x=g+p[w],v=g-p[P];g=wn(x,g,v)}const b=u.fn({...t,[h]:y,[m]:g});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[h]:a,[m]:c}}}}}},np=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:a}=t,{offset:c=0,mainAxis:u=!0,crossAxis:f=!0}=Ne(e,t),d={x:n,y:r},p=ye(o),m=Kn(p);let h=d[m],y=d[p];const g=Ne(c,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(u){const x=m==="y"?"height":"width",v=s.reference[m]-s.floating[x]+b.mainAxis,E=s.reference[m]+s.reference[x]-b.mainAxis;h<v?h=v:h>E&&(h=E)}if(f){var w,P;const x=m==="y"?"width":"height",v=Es.has(Ee(o)),E=s.reference[p]-s.floating[x]+(v&&((w=a.offset)==null?void 0:w[p])||0)+(v?0:b.crossAxis),_=s.reference[p]+s.reference[x]+(v?0:((P=a.offset)==null?void 0:P[p])||0)-(v?b.crossAxis:0);y<E?y=E:y>_&&(y=_)}return{[m]:h,[p]:y}}}},rp=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:a,elements:c}=t,{apply:u=()=>{},...f}=Ne(e,t),d=await a.detectOverflow(t,f),p=Ee(o),m=Qe(o),h=ye(o)==="y",{width:y,height:g}=s.floating;let b,w;p==="top"||p==="bottom"?(b=p,w=m===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(w=p,b=m==="end"?"top":"bottom");const P=g-d.top-d.bottom,x=y-d.left-d.right,v=Re(g-d[b],P),E=Re(y-d[w],x),_=!t.middlewareData.shift;let C=v,T=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=P),_&&!m){const N=ae(d.left,0),D=ae(d.right,0),F=ae(d.top,0),R=ae(d.bottom,0);h?T=y-2*(N!==0||D!==0?N+D:ae(d.left,d.right)):C=g-2*(F!==0||R!==0?F+R:ae(d.top,d.bottom))}await u({...t,availableWidth:T,availableHeight:C});const j=await a.getDimensions(c.floating);return y!==j.width||g!==j.height?{reset:{rects:!0}}:{}}}};function Wt(){return typeof window<"u"}function Xe(e){return _s(e)?(e.nodeName||"").toLowerCase():"#document"}function ce(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ce(e){var t;return(t=(_s(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _s(e){return Wt()?e instanceof Node||e instanceof ce(e).Node:!1}function pe(e){return Wt()?e instanceof Element||e instanceof ce(e).Element:!1}function be(e){return Wt()?e instanceof HTMLElement||e instanceof ce(e).HTMLElement:!1}function Wr(e){return!Wt()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ce(e).ShadowRoot}const op=new Set(["inline","contents"]);function ut(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=me(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!op.has(o)}const sp=new Set(["table","td","th"]);function ip(e){return sp.has(Xe(e))}const ap=[":popover-open",":modal"];function Ht(e){return ap.some(t=>{try{return e.matches(t)}catch{return!1}})}const cp=["transform","translate","scale","rotate","perspective"],lp=["transform","translate","scale","rotate","perspective","filter"],up=["paint","layout","strict","content"];function Qn(e){const t=Xn(),n=pe(e)?me(e):e;return cp.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||lp.some(r=>(n.willChange||"").includes(r))||up.some(r=>(n.contain||"").includes(r))}function dp(e){let t=Te(e);for(;be(t)&&!qe(t);){if(Qn(t))return t;if(Ht(t))return null;t=Te(t)}return null}function Xn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fp=new Set(["html","body","#document"]);function qe(e){return fp.has(Xe(e))}function me(e){return ce(e).getComputedStyle(e)}function Kt(e){return pe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Te(e){if(Xe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wr(e)&&e.host||Ce(e);return Wr(t)?t.host:t}function Rs(e){const t=Te(e);return qe(t)?e.ownerDocument?e.ownerDocument.body:e.body:be(t)&&ut(t)?t:Rs(t)}function st(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Rs(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),a=ce(o);if(s){const c=Sn(a);return t.concat(a,a.visualViewport||[],ut(o)?o:[],c&&n?st(c):[])}return t.concat(o,st(o,[],n))}function Sn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ts(e){const t=me(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=be(e),s=o?e.offsetWidth:n,a=o?e.offsetHeight:r,c=It(n)!==s||It(r)!==a;return c&&(n=s,r=a),{width:n,height:r,$:c}}function Yn(e){return pe(e)?e:e.contextElement}function We(e){const t=Yn(e);if(!be(t))return we(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=Ts(t);let a=(s?It(n.width):n.width)/r,c=(s?It(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const pp=we(0);function Ds(e){const t=ce(e);return!Xn()||!t.visualViewport?pp:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mp(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ce(e)?!1:t}function Me(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Yn(e);let a=we(1);t&&(r?pe(r)&&(a=We(r)):a=We(e));const c=mp(s,n,r)?Ds(s):we(0);let u=(o.left+c.x)/a.x,f=(o.top+c.y)/a.y,d=o.width/a.x,p=o.height/a.y;if(s){const m=ce(s),h=r&&pe(r)?ce(r):r;let y=m,g=Sn(y);for(;g&&r&&h!==y;){const b=We(g),w=g.getBoundingClientRect(),P=me(g),x=w.left+(g.clientLeft+parseFloat(P.paddingLeft))*b.x,v=w.top+(g.clientTop+parseFloat(P.paddingTop))*b.y;u*=b.x,f*=b.y,d*=b.x,p*=b.y,u+=x,f+=v,y=ce(g),g=Sn(y)}}return Ot({width:d,height:p,x:u,y:f})}function qt(e,t){const n=Kt(e).scrollLeft;return t?t.left+n:Me(Ce(e)).left+n}function As(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-qt(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function hp(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",a=Ce(r),c=t?Ht(t.floating):!1;if(r===a||c&&s)return n;let u={scrollLeft:0,scrollTop:0},f=we(1);const d=we(0),p=be(r);if((p||!p&&!s)&&((Xe(r)!=="body"||ut(a))&&(u=Kt(r)),be(r))){const h=Me(r);f=We(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const m=a&&!p&&!s?As(a,u):we(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+d.x+m.x,y:n.y*f.y-u.scrollTop*f.y+d.y+m.y}}function gp(e){return Array.from(e.getClientRects())}function xp(e){const t=Ce(e),n=Kt(e),r=e.ownerDocument.body,o=ae(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ae(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+qt(e);const c=-n.scrollTop;return me(r).direction==="rtl"&&(a+=ae(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:a,y:c}}const Hr=25;function vp(e,t){const n=ce(e),r=Ce(e),o=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,u=0;if(o){s=o.width,a=o.height;const d=Xn();(!d||d&&t==="fixed")&&(c=o.offsetLeft,u=o.offsetTop)}const f=qt(r);if(f<=0){const d=r.ownerDocument,p=d.body,m=getComputedStyle(p),h=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-p.clientWidth-h);y<=Hr&&(s-=y)}else f<=Hr&&(s+=f);return{width:s,height:a,x:c,y:u}}const yp=new Set(["absolute","fixed"]);function wp(e,t){const n=Me(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=be(e)?We(e):we(1),a=e.clientWidth*s.x,c=e.clientHeight*s.y,u=o*s.x,f=r*s.y;return{width:a,height:c,x:u,y:f}}function Kr(e,t,n){let r;if(t==="viewport")r=vp(e,n);else if(t==="document")r=xp(Ce(e));else if(pe(t))r=wp(t,n);else{const o=Ds(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ot(r)}function js(e,t){const n=Te(e);return n===t||!pe(n)||qe(n)?!1:me(n).position==="fixed"||js(n,t)}function bp(e,t){const n=t.get(e);if(n)return n;let r=st(e,[],!1).filter(c=>pe(c)&&Xe(c)!=="body"),o=null;const s=me(e).position==="fixed";let a=s?Te(e):e;for(;pe(a)&&!qe(a);){const c=me(a),u=Qn(a);!u&&c.position==="fixed"&&(o=null),(s?!u&&!o:!u&&c.position==="static"&&!!o&&yp.has(o.position)||ut(a)&&!u&&js(e,a))?r=r.filter(d=>d!==a):o=c,a=Te(a)}return t.set(e,r),r}function Sp(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?Ht(t)?[]:bp(t,this._c):[].concat(n),r],c=a[0],u=a.reduce((f,d)=>{const p=Kr(t,d,o);return f.top=ae(p.top,f.top),f.right=Re(p.right,f.right),f.bottom=Re(p.bottom,f.bottom),f.left=ae(p.left,f.left),f},Kr(t,c,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Cp(e){const{width:t,height:n}=Ts(e);return{width:t,height:n}}function Pp(e,t,n){const r=be(t),o=Ce(t),s=n==="fixed",a=Me(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const u=we(0);function f(){u.x=qt(o)}if(r||!r&&!s)if((Xe(t)!=="body"||ut(o))&&(c=Kt(t)),r){const h=Me(t,!0,s,t);u.x=h.x+t.clientLeft,u.y=h.y+t.clientTop}else o&&f();s&&!r&&o&&f();const d=o&&!r&&!s?As(o,c):we(0),p=a.left+c.scrollLeft-u.x-d.x,m=a.top+c.scrollTop-u.y-d.y;return{x:p,y:m,width:a.width,height:a.height}}function dn(e){return me(e).position==="static"}function qr(e,t){if(!be(e)||me(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ce(e)===n&&(n=n.ownerDocument.body),n}function Is(e,t){const n=ce(e);if(Ht(e))return n;if(!be(e)){let o=Te(e);for(;o&&!qe(o);){if(pe(o)&&!dn(o))return o;o=Te(o)}return n}let r=qr(e,t);for(;r&&ip(r)&&dn(r);)r=qr(r,t);return r&&qe(r)&&dn(r)&&!Qn(r)?n:r||dp(e)||n}const Np=async function(e){const t=this.getOffsetParent||Is,n=this.getDimensions,r=await n(e.floating);return{reference:Pp(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ep(e){return me(e).direction==="rtl"}const _p={convertOffsetParentRelativeRectToViewportRelativeRect:hp,getDocumentElement:Ce,getClippingRect:Sp,getOffsetParent:Is,getElementRects:Np,getClientRects:gp,getDimensions:Cp,getScale:We,isElement:pe,isRTL:Ep};function Ms(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Rp(e,t){let n=null,r;const o=Ce(e);function s(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),s();const f=e.getBoundingClientRect(),{left:d,top:p,width:m,height:h}=f;if(c||t(),!m||!h)return;const y=bt(p),g=bt(o.clientWidth-(d+m)),b=bt(o.clientHeight-(p+h)),w=bt(d),x={rootMargin:-y+"px "+-g+"px "+-b+"px "+-w+"px",threshold:ae(0,Re(1,u))||1};let v=!0;function E(_){const C=_[0].intersectionRatio;if(C!==u){if(!v)return a();C?a(!1,C):r=setTimeout(()=>{a(!1,1e-7)},1e3)}C===1&&!Ms(f,e.getBoundingClientRect())&&a(),v=!1}try{n=new IntersectionObserver(E,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(E,x)}n.observe(e)}return a(!0),s}function Tp(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=Yn(e),d=o||s?[...f?st(f):[],...st(t)]:[];d.forEach(w=>{o&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const p=f&&c?Rp(f,n):null;let m=-1,h=null;a&&(h=new ResizeObserver(w=>{let[P]=w;P&&P.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),f&&!u&&h.observe(f),h.observe(t));let y,g=u?Me(e):null;u&&b();function b(){const w=Me(e);g&&!Ms(g,w)&&n(),g=w,y=requestAnimationFrame(b)}return n(),()=>{var w;d.forEach(P=>{o&&P.removeEventListener("scroll",n),s&&P.removeEventListener("resize",n)}),p?.(),(w=h)==null||w.disconnect(),h=null,u&&cancelAnimationFrame(y)}}const Dp=ep,Ap=tp,jp=Yf,Ip=rp,Mp=Jf,Gr=Xf,Op=np,Lp=(e,t,n)=>{const r=new Map,o={platform:_p,...n},s={...o.platform,_c:r};return Qf(e,t,{...o,platform:s})};var Fp=typeof document<"u",kp=function(){},Pt=Fp?l.useLayoutEffect:kp;function Lt(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Lt(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Lt(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Os(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qr(e,t){const n=Os(e);return Math.round(t*n)/n}function fn(e){const t=l.useRef(e);return Pt(()=>{t.current=e}),t}function $p(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:u,open:f}=e,[d,p]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=l.useState(r);Lt(m,r)||h(r);const[y,g]=l.useState(null),[b,w]=l.useState(null),P=l.useCallback(O=>{O!==_.current&&(_.current=O,g(O))},[]),x=l.useCallback(O=>{O!==C.current&&(C.current=O,w(O))},[]),v=s||y,E=a||b,_=l.useRef(null),C=l.useRef(null),T=l.useRef(d),j=u!=null,N=fn(u),D=fn(o),F=fn(f),R=l.useCallback(()=>{if(!_.current||!C.current)return;const O={placement:t,strategy:n,middleware:m};D.current&&(O.platform=D.current),Lp(_.current,C.current,O).then(A=>{const ee={...A,isPositioned:F.current!==!1};I.current&&!Lt(T.current,ee)&&(T.current=ee,Zr.flushSync(()=>{p(ee)}))})},[m,t,n,D,F]);Pt(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[f]);const I=l.useRef(!1);Pt(()=>(I.current=!0,()=>{I.current=!1}),[]),Pt(()=>{if(v&&(_.current=v),E&&(C.current=E),v&&E){if(N.current)return N.current(v,E,R);R()}},[v,E,R,N,j]);const k=l.useMemo(()=>({reference:_,floating:C,setReference:P,setFloating:x}),[P,x]),$=l.useMemo(()=>({reference:v,floating:E}),[v,E]),U=l.useMemo(()=>{const O={position:n,left:0,top:0};if(!$.floating)return O;const A=Qr($.floating,d.x),ee=Qr($.floating,d.y);return c?{...O,transform:"translate("+A+"px, "+ee+"px)",...Os($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:A,top:ee}},[n,c,$.floating,d.x,d.y]);return l.useMemo(()=>({...d,update:R,refs:k,elements:$,floatingStyles:U}),[d,R,k,$,U])}const Bp=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Gr({element:r.current,padding:o}).fn(n):{}:r?Gr({element:r,padding:o}).fn(n):{}}}},Vp=(e,t)=>({...Dp(e),options:[e,t]}),zp=(e,t)=>({...Ap(e),options:[e,t]}),Up=(e,t)=>({...Op(e),options:[e,t]}),Wp=(e,t)=>({...jp(e),options:[e,t]}),Hp=(e,t)=>({...Ip(e),options:[e,t]}),Kp=(e,t)=>({...Mp(e),options:[e,t]}),qp=(e,t)=>({...Bp(e),options:[e,t]});var Gp="Arrow",Ls=l.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return i.jsx(K.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ls.displayName=Gp;var Qp=Ls;function Xp(e){const[t,n]=l.useState(void 0);return Pe(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let a,c;if("borderBoxSize"in s){const u=s.borderBoxSize,f=Array.isArray(u)?u[0]:u;a=f.inlineSize,c=f.blockSize}else a=e.offsetWidth,c=e.offsetHeight;n({width:a,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Jn="Popper",[Fs,ks]=Oe(Jn),[Yp,$s]=Fs(Jn),Bs=e=>{const{__scopePopper:t,children:n}=e,[r,o]=l.useState(null);return i.jsx(Yp,{scope:t,anchor:r,onAnchorChange:o,children:n})};Bs.displayName=Jn;var Vs="PopperAnchor",zs=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=$s(Vs,n),a=l.useRef(null),c=G(t,a),u=l.useRef(null);return l.useEffect(()=>{const f=u.current;u.current=r?.current||a.current,f!==u.current&&s.onAnchorChange(u.current)}),r?null:i.jsx(K.div,{...o,ref:c})});zs.displayName=Vs;var Zn="PopperContent",[Jp,Zp]=Fs(Zn),Us=l.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:d=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:y,...g}=e,b=$s(Zn,n),[w,P]=l.useState(null),x=G(t,J=>P(J)),[v,E]=l.useState(null),_=Xp(v),C=_?.width??0,T=_?.height??0,j=r+(s!=="center"?"-"+s:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(f)?f:[f],F=D.length>0,R={padding:N,boundary:D.filter(tm),altBoundary:F},{refs:I,floatingStyles:k,placement:$,isPositioned:U,middlewareData:O}=$p({strategy:"fixed",placement:j,whileElementsMounted:(...J)=>Tp(...J,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[Vp({mainAxis:o+T,alignmentAxis:a}),u&&zp({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Up():void 0,...R}),u&&Wp({...R}),Hp({...R,apply:({elements:J,rects:Ze,availableWidth:qi,availableHeight:Gi})=>{const{width:Qi,height:Xi}=Ze.reference,ht=J.floating.style;ht.setProperty("--radix-popper-available-width",`${qi}px`),ht.setProperty("--radix-popper-available-height",`${Gi}px`),ht.setProperty("--radix-popper-anchor-width",`${Qi}px`),ht.setProperty("--radix-popper-anchor-height",`${Xi}px`)}}),v&&qp({element:v,padding:c}),nm({arrowWidth:C,arrowHeight:T}),m&&Kp({strategy:"referenceHidden",...R})]}),[A,ee]=Ks($),ge=re(y);Pe(()=>{U&&ge?.()},[U,ge]);const De=O.arrow?.x,Ye=O.arrow?.y,Je=O.arrow?.centerOffset!==0,[mt,Ae]=l.useState();return Pe(()=>{w&&Ae(window.getComputedStyle(w).zIndex)},[w]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:U?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:mt,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Jp,{scope:n,placedSide:A,onArrowChange:E,arrowX:De,arrowY:Ye,shouldHideArrow:Je,children:i.jsx(K.div,{"data-side":A,"data-align":ee,...g,ref:x,style:{...g.style,animation:U?void 0:"none"}})})})});Us.displayName=Zn;var Ws="PopperArrow",em={top:"bottom",right:"left",bottom:"top",left:"right"},Hs=l.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=Zp(Ws,r),a=em[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(Qp,{...o,ref:n,style:{...o.style,display:"block"}})})});Hs.displayName=Ws;function tm(e){return e!==null}var nm=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,a=o.arrow?.centerOffset!==0,c=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[f,d]=Ks(n),p={start:"0%",center:"50%",end:"100%"}[d],m=(o.arrow?.x??0)+c/2,h=(o.arrow?.y??0)+u/2;let y="",g="";return f==="bottom"?(y=a?p:`${m}px`,g=`${-u}px`):f==="top"?(y=a?p:`${m}px`,g=`${r.floating.height+u}px`):f==="right"?(y=`${-u}px`,g=a?p:`${h}px`):f==="left"&&(y=`${r.floating.width+u}px`,g=a?p:`${h}px`),{data:{x:y,y:g}}}});function Ks(e){const[t,n="center"]=e.split("-");return[t,n]}var rm=Bs,om=zs,sm=Us,im=Hs,pn="rovingFocusGroup.onEntryFocus",am={bubbles:!1,cancelable:!0},dt="RovingFocusGroup",[Cn,qs,cm]=Ps(dt),[lm,Gs]=Oe(dt,[cm]),[um,dm]=lm(dt),Qs=l.forwardRef((e,t)=>i.jsx(Cn.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Cn.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(fm,{...e,ref:t})})}));Qs.displayName=dt;var fm=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:d=!1,...p}=e,m=l.useRef(null),h=G(t,m),y=Vn(s),[g,b]=In({prop:a,defaultProp:c??null,onChange:u,caller:dt}),[w,P]=l.useState(!1),x=re(f),v=qs(n),E=l.useRef(!1),[_,C]=l.useState(0);return l.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(pn,x),()=>T.removeEventListener(pn,x)},[x]),i.jsx(um,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:g,onItemFocus:l.useCallback(T=>b(T),[b]),onItemShiftTab:l.useCallback(()=>P(!0),[]),onFocusableItemAdd:l.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:l.useCallback(()=>C(T=>T-1),[]),children:i.jsx(K.div,{tabIndex:w||_===0?-1:0,"data-orientation":r,...p,ref:h,style:{outline:"none",...e.style},onMouseDown:M(e.onMouseDown,()=>{E.current=!0}),onFocus:M(e.onFocus,T=>{const j=!E.current;if(T.target===T.currentTarget&&j&&!w){const N=new CustomEvent(pn,am);if(T.currentTarget.dispatchEvent(N),!N.defaultPrevented){const D=v().filter($=>$.focusable),F=D.find($=>$.active),R=D.find($=>$.id===g),k=[F,R,...D].filter(Boolean).map($=>$.ref.current);Js(k,d)}}E.current=!1}),onBlur:M(e.onBlur,()=>P(!1))})})}),Xs="RovingFocusGroupItem",Ys=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:a,...c}=e,u=ze(),f=s||u,d=dm(Xs,n),p=d.currentTabStopId===f,m=qs(n),{onFocusableItemAdd:h,onFocusableItemRemove:y,currentTabStopId:g}=d;return l.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),i.jsx(Cn.ItemSlot,{scope:n,id:f,focusable:r,active:o,children:i.jsx(K.span,{tabIndex:p?0:-1,"data-orientation":d.orientation,...c,ref:t,onMouseDown:M(e.onMouseDown,b=>{r?d.onItemFocus(f):b.preventDefault()}),onFocus:M(e.onFocus,()=>d.onItemFocus(f)),onKeyDown:M(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=hm(b,d.orientation,d.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=m().filter(v=>v.focusable).map(v=>v.ref.current);if(w==="last")x.reverse();else if(w==="prev"||w==="next"){w==="prev"&&x.reverse();const v=x.indexOf(b.currentTarget);x=d.loop?gm(x,v+1):x.slice(v+1)}setTimeout(()=>Js(x))}}),children:typeof a=="function"?a({isCurrentTabStop:p,hasTabStop:g!=null}):a})})});Ys.displayName=Xs;var pm={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mm(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hm(e,t,n){const r=mm(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pm[r]}function Js(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function gm(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var xm=Qs,vm=Ys;function ym(e){const t=wm(e),n=l.forwardRef((r,o)=>{const{children:s,...a}=r,c=l.Children.toArray(s),u=c.find(Sm);if(u){const f=u.props.children,d=c.map(p=>p===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:p);return i.jsx(t,{...a,ref:o,children:l.isValidElement(f)?l.cloneElement(f,void 0,d):null})}return i.jsx(t,{...a,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function wm(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const a=Pm(o),c=Cm(s,o.props);return o.type!==l.Fragment&&(c.ref=r?Ge(r,a):a),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bm=Symbol("radix.slottable");function Sm(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bm}function Cm(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...c)=>{const u=s(...c);return o(...c),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Pm(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Pn=["Enter"," "],Nm=["ArrowDown","PageUp","Home"],Zs=["ArrowUp","PageDown","End"],Em=[...Nm,...Zs],_m={ltr:[...Pn,"ArrowRight"],rtl:[...Pn,"ArrowLeft"]},Rm={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ft="Menu",[it,Tm,Dm]=Ps(ft),[Le,ei]=Oe(ft,[Dm,ks,Gs]),Gt=ks(),ti=Gs(),[Am,Fe]=Le(ft),[jm,pt]=Le(ft),ni=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:a=!0}=e,c=Gt(t),[u,f]=l.useState(null),d=l.useRef(!1),p=re(s),m=Vn(o);return l.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),i.jsx(rm,{...c,children:i.jsx(Am,{scope:t,open:n,onOpenChange:p,content:u,onContentChange:f,children:i.jsx(jm,{scope:t,onClose:l.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:d,dir:m,modal:a,children:r})})})};ni.displayName=ft;var Im="MenuAnchor",er=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Gt(n);return i.jsx(om,{...o,...r,ref:t})});er.displayName=Im;var tr="MenuPortal",[Mm,ri]=Le(tr,{forceMount:void 0}),oi=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=Fe(tr,t);return i.jsx(Mm,{scope:t,forceMount:n,children:i.jsx(ue,{present:n||s.open,children:i.jsx(Ln,{asChild:!0,container:o,children:r})})})};oi.displayName=tr;var le="MenuContent",[Om,nr]=Le(le),si=l.forwardRef((e,t)=>{const n=ri(le,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Fe(le,e.__scopeMenu),a=pt(le,e.__scopeMenu);return i.jsx(it.Provider,{scope:e.__scopeMenu,children:i.jsx(ue,{present:r||s.open,children:i.jsx(it.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(Lm,{...o,ref:t}):i.jsx(Fm,{...o,ref:t})})})})}),Lm=l.forwardRef((e,t)=>{const n=Fe(le,e.__scopeMenu),r=l.useRef(null),o=G(t,r);return l.useEffect(()=>{const s=r.current;if(s)return Fo(s)},[]),i.jsx(rr,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:M(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Fm=l.forwardRef((e,t)=>{const n=Fe(le,e.__scopeMenu);return i.jsx(rr,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),km=ym("MenuContent.ScrollLock"),rr=l.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,onDismiss:h,disableOutsideScroll:y,...g}=e,b=Fe(le,n),w=pt(le,n),P=Gt(n),x=ti(n),v=Tm(n),[E,_]=l.useState(null),C=l.useRef(null),T=G(t,C,b.onContentChange),j=l.useRef(0),N=l.useRef(""),D=l.useRef(0),F=l.useRef(null),R=l.useRef("right"),I=l.useRef(0),k=y?Fn:l.Fragment,$=y?{as:km,allowPinchZoom:!0}:void 0,U=A=>{const ee=N.current+A,ge=v().filter(J=>!J.disabled),De=document.activeElement,Ye=ge.find(J=>J.ref.current===De)?.textValue,Je=ge.map(J=>J.textValue),mt=Xm(Je,ee,Ye),Ae=ge.find(J=>J.textValue===mt)?.ref.current;(function J(Ze){N.current=Ze,window.clearTimeout(j.current),Ze!==""&&(j.current=window.setTimeout(()=>J(""),1e3))})(ee),Ae&&setTimeout(()=>Ae.focus())};l.useEffect(()=>()=>window.clearTimeout(j.current),[]),Ro();const O=l.useCallback(A=>R.current===F.current?.side&&Jm(A,F.current?.area),[]);return i.jsx(Om,{scope:n,searchRef:N,onItemEnter:l.useCallback(A=>{O(A)&&A.preventDefault()},[O]),onItemLeave:l.useCallback(A=>{O(A)||(C.current?.focus(),_(null))},[O]),onTriggerLeave:l.useCallback(A=>{O(A)&&A.preventDefault()},[O]),pointerGraceTimerRef:D,onPointerGraceIntentChange:l.useCallback(A=>{F.current=A},[]),children:i.jsx(k,{...$,children:i.jsx(On,{asChild:!0,trapped:o,onMountAutoFocus:M(s,A=>{A.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Mn,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,onDismiss:h,children:i.jsx(xm,{asChild:!0,...x,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:_,onEntryFocus:M(u,A=>{w.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(sm,{role:"menu","aria-orientation":"vertical","data-state":bi(b.open),"data-radix-menu-content":"",dir:w.dir,...P,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:M(g.onKeyDown,A=>{const ge=A.target.closest("[data-radix-menu-content]")===A.currentTarget,De=A.ctrlKey||A.altKey||A.metaKey,Ye=A.key.length===1;ge&&(A.key==="Tab"&&A.preventDefault(),!De&&Ye&&U(A.key));const Je=C.current;if(A.target!==Je||!Em.includes(A.key))return;A.preventDefault();const Ae=v().filter(J=>!J.disabled).map(J=>J.ref.current);Zs.includes(A.key)&&Ae.reverse(),Gm(Ae)}),onBlur:M(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(j.current),N.current="")}),onPointerMove:M(e.onPointerMove,at(A=>{const ee=A.target,ge=I.current!==A.clientX;if(A.currentTarget.contains(ee)&&ge){const De=A.clientX>I.current?"right":"left";R.current=De,I.current=A.clientX}}))})})})})})})});si.displayName=le;var $m="MenuGroup",or=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(K.div,{role:"group",...r,ref:t})});or.displayName=$m;var Bm="MenuLabel",ii=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(K.div,{...r,ref:t})});ii.displayName=Bm;var Ft="MenuItem",Xr="menu.itemSelect",Qt=l.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=l.useRef(null),a=pt(Ft,e.__scopeMenu),c=nr(Ft,e.__scopeMenu),u=G(t,s),f=l.useRef(!1),d=()=>{const p=s.current;if(!n&&p){const m=new CustomEvent(Xr,{bubbles:!0,cancelable:!0});p.addEventListener(Xr,h=>r?.(h),{once:!0}),Po(p,m),m.defaultPrevented?f.current=!1:a.onClose()}};return i.jsx(ai,{...o,ref:u,disabled:n,onClick:M(e.onClick,d),onPointerDown:p=>{e.onPointerDown?.(p),f.current=!0},onPointerUp:M(e.onPointerUp,p=>{f.current||p.currentTarget?.click()}),onKeyDown:M(e.onKeyDown,p=>{const m=c.searchRef.current!=="";n||m&&p.key===" "||Pn.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Qt.displayName=Ft;var ai=l.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,a=nr(Ft,n),c=ti(n),u=l.useRef(null),f=G(t,u),[d,p]=l.useState(!1),[m,h]=l.useState("");return l.useEffect(()=>{const y=u.current;y&&h((y.textContent??"").trim())},[s.children]),i.jsx(it.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:i.jsx(vm,{asChild:!0,...c,focusable:!r,children:i.jsx(K.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:f,onPointerMove:M(e.onPointerMove,at(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:M(e.onPointerLeave,at(y=>a.onItemLeave(y))),onFocus:M(e.onFocus,()=>p(!0)),onBlur:M(e.onBlur,()=>p(!1))})})})}),Vm="MenuCheckboxItem",ci=l.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return i.jsx(pi,{scope:e.__scopeMenu,checked:n,children:i.jsx(Qt,{role:"menuitemcheckbox","aria-checked":kt(n)?"mixed":n,...o,ref:t,"data-state":ir(n),onSelect:M(o.onSelect,()=>r?.(kt(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ci.displayName=Vm;var li="MenuRadioGroup",[zm,Um]=Le(li,{value:void 0,onValueChange:()=>{}}),ui=l.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=re(r);return i.jsx(zm,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(or,{...o,ref:t})})});ui.displayName=li;var di="MenuRadioItem",fi=l.forwardRef((e,t)=>{const{value:n,...r}=e,o=Um(di,e.__scopeMenu),s=n===o.value;return i.jsx(pi,{scope:e.__scopeMenu,checked:s,children:i.jsx(Qt,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":ir(s),onSelect:M(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});fi.displayName=di;var sr="MenuItemIndicator",[pi,Wm]=Le(sr,{checked:!1}),mi=l.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=Wm(sr,n);return i.jsx(ue,{present:r||kt(s.checked)||s.checked===!0,children:i.jsx(K.span,{...o,ref:t,"data-state":ir(s.checked)})})});mi.displayName=sr;var Hm="MenuSeparator",hi=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(K.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});hi.displayName=Hm;var Km="MenuArrow",gi=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Gt(n);return i.jsx(im,{...o,...r,ref:t})});gi.displayName=Km;var qm="MenuSub",[Gh,xi]=Le(qm),et="MenuSubTrigger",vi=l.forwardRef((e,t)=>{const n=Fe(et,e.__scopeMenu),r=pt(et,e.__scopeMenu),o=xi(et,e.__scopeMenu),s=nr(et,e.__scopeMenu),a=l.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=s,f={__scopeMenu:e.__scopeMenu},d=l.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return l.useEffect(()=>d,[d]),l.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),i.jsx(er,{asChild:!0,...f,children:i.jsx(ai,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":bi(n.open),...e,ref:Ge(t,o.onTriggerChange),onClick:p=>{e.onClick?.(p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:M(e.onPointerMove,at(p=>{s.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:M(e.onPointerLeave,at(p=>{d();const m=n.content?.getBoundingClientRect();if(m){const h=n.content?.dataset.side,y=h==="right",g=y?-5:5,b=m[y?"left":"right"],w=m[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:p.clientX+g,y:p.clientY},{x:b,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:b,y:m.bottom}],side:h}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(p),p.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:M(e.onKeyDown,p=>{const m=s.searchRef.current!=="";e.disabled||m&&p.key===" "||_m[r.dir].includes(p.key)&&(n.onOpenChange(!0),n.content?.focus(),p.preventDefault())})})})});vi.displayName=et;var yi="MenuSubContent",wi=l.forwardRef((e,t)=>{const n=ri(le,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Fe(le,e.__scopeMenu),a=pt(le,e.__scopeMenu),c=xi(yi,e.__scopeMenu),u=l.useRef(null),f=G(t,u);return i.jsx(it.Provider,{scope:e.__scopeMenu,children:i.jsx(ue,{present:r||s.open,children:i.jsx(it.Slot,{scope:e.__scopeMenu,children:i.jsx(rr,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:f,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{a.isUsingKeyboardRef.current&&u.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:M(e.onFocusOutside,d=>{d.target!==c.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:M(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:M(e.onKeyDown,d=>{const p=d.currentTarget.contains(d.target),m=Rm[a.dir].includes(d.key);p&&m&&(s.onOpenChange(!1),c.trigger?.focus(),d.preventDefault())})})})})})});wi.displayName=yi;function bi(e){return e?"open":"closed"}function kt(e){return e==="indeterminate"}function ir(e){return kt(e)?"indeterminate":e?"checked":"unchecked"}function Gm(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Qm(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Xm(e,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=Qm(e,Math.max(s,0));o.length===1&&(a=a.filter(f=>f!==n));const u=a.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return u!==n?u:void 0}function Ym(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const c=t[s],u=t[a],f=c.x,d=c.y,p=u.x,m=u.y;d>r!=m>r&&n<(p-f)*(r-d)/(m-d)+f&&(o=!o)}return o}function Jm(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Ym(n,t)}function at(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Zm=ni,eh=er,th=oi,nh=si,rh=or,oh=ii,sh=Qt,ih=ci,ah=ui,ch=fi,lh=mi,uh=hi,dh=gi,fh=vi,ph=wi,Xt="DropdownMenu",[mh]=Oe(Xt,[ei]),se=ei(),[hh,Si]=mh(Xt),Ci=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:a,modal:c=!0}=e,u=se(t),f=l.useRef(null),[d,p]=In({prop:o,defaultProp:s??!1,onChange:a,caller:Xt});return i.jsx(hh,{scope:t,triggerId:ze(),triggerRef:f,contentId:ze(),open:d,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(m=>!m),[p]),modal:c,children:i.jsx(Zm,{...u,open:d,onOpenChange:p,dir:r,modal:c,children:n})})};Ci.displayName=Xt;var Pi="DropdownMenuTrigger",Ni=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=Si(Pi,n),a=se(n);return i.jsx(eh,{asChild:!0,...a,children:i.jsx(K.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Ge(t,s.triggerRef),onPointerDown:M(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(s.onOpenToggle(),s.open||c.preventDefault())}),onKeyDown:M(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&s.onOpenToggle(),c.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Ni.displayName=Pi;var gh="DropdownMenuPortal",Ei=e=>{const{__scopeDropdownMenu:t,...n}=e,r=se(t);return i.jsx(th,{...r,...n})};Ei.displayName=gh;var _i="DropdownMenuContent",Ri=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Si(_i,n),s=se(n),a=l.useRef(!1);return i.jsx(nh,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:M(e.onCloseAutoFocus,c=>{a.current||o.triggerRef.current?.focus(),a.current=!1,c.preventDefault()}),onInteractOutside:M(e.onInteractOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,d=u.button===2||f;(!o.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ri.displayName=_i;var xh="DropdownMenuGroup",vh=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(rh,{...o,...r,ref:t})});vh.displayName=xh;var yh="DropdownMenuLabel",Ti=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(oh,{...o,...r,ref:t})});Ti.displayName=yh;var wh="DropdownMenuItem",Di=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(sh,{...o,...r,ref:t})});Di.displayName=wh;var bh="DropdownMenuCheckboxItem",Ai=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(ih,{...o,...r,ref:t})});Ai.displayName=bh;var Sh="DropdownMenuRadioGroup",Ch=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(ah,{...o,...r,ref:t})});Ch.displayName=Sh;var Ph="DropdownMenuRadioItem",ji=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(ch,{...o,...r,ref:t})});ji.displayName=Ph;var Nh="DropdownMenuItemIndicator",Ii=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(lh,{...o,...r,ref:t})});Ii.displayName=Nh;var Eh="DropdownMenuSeparator",Mi=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(uh,{...o,...r,ref:t})});Mi.displayName=Eh;var _h="DropdownMenuArrow",Rh=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(dh,{...o,...r,ref:t})});Rh.displayName=_h;var Th="DropdownMenuSubTrigger",Oi=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(fh,{...o,...r,ref:t})});Oi.displayName=Th;var Dh="DropdownMenuSubContent",Li=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=se(n);return i.jsx(ph,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Li.displayName=Dh;var Ah=Ci,jh=Ni,Ih=Ei,Fi=Ri,ki=Ti,$i=Di,Bi=Ai,Vi=ji,zi=Ii,Ui=Mi,Wi=Oi,Hi=Li;const Mh=Ah,Oh=jh,Lh=l.forwardRef(({className:e,inset:t,children:n,...r},o)=>i.jsxs(Wi,{ref:o,className:Q("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,i.jsx(to,{className:"ml-auto"})]}));Lh.displayName=Wi.displayName;const Fh=l.forwardRef(({className:e,...t},n)=>i.jsx(Hi,{ref:n,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Fh.displayName=Hi.displayName;const Ki=l.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Ih,{children:i.jsx(Fi,{ref:r,sideOffset:t,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ki.displayName=Fi.displayName;const Nt=l.forwardRef(({className:e,inset:t,...n},r)=>i.jsx($i,{ref:r,className:Q("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Nt.displayName=$i.displayName;const kh=l.forwardRef(({className:e,children:t,checked:n,...r},o)=>i.jsxs(Bi,{ref:o,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(zi,{children:i.jsx(ca,{className:"h-4 w-4"})})}),t]}));kh.displayName=Bi.displayName;const $h=l.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Vi,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(zi,{children:i.jsx(ga,{className:"h-2 w-2 fill-current"})})}),t]}));$h.displayName=Vi.displayName;const Bh=l.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(ki,{ref:r,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Bh.displayName=ki.displayName;const Vh=l.forwardRef(({className:e,...t},n)=>i.jsx(Ui,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));Vh.displayName=Ui.displayName;const zh=[{href:"/",icon:_a,label:""},{href:"/chat",icon:Ia,label:""},{href:"/search",icon:Fa,label:""},{href:"/tags",icon:za,label:""}],Uh=[{href:"/analyze",icon:tt,label:""},{href:"/quarterly",icon:wa,label:""},{href:"/users",icon:qa,label:""}];function Wh(){const[e,t]=l.useState("/");l.useEffect(()=>{t(window.location.pathname)},[]);const n=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/login"}catch(r){console.error(":",r)}};return i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t md:hidden z-50 safe-area-pb",children:i.jsxs("div",{className:"flex items-center justify-around h-16",children:[zh.map(r=>{const o=r.icon,s=e===r.href;return i.jsxs("a",{href:r.href,className:Q("flex flex-col items-center justify-center w-full h-full min-h-[44px] transition-colors relative no-tap-highlight",s?"text-primary":"text-muted-foreground"),children:[s&&i.jsx("span",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-12 h-0.5 bg-primary rounded-b-full"}),i.jsx(o,{className:"h-5 w-5 mb-1",strokeWidth:s?2.5:2}),i.jsx("span",{className:"text-xs font-medium",children:r.label})]},r.href)}),i.jsxs(Mh,{children:[i.jsx(Oh,{asChild:!0,children:i.jsxs("button",{className:"flex flex-col items-center justify-center w-full h-full min-h-[44px] text-muted-foreground transition-colors",children:[i.jsx(no,{className:"h-5 w-5 mb-1"}),i.jsx("span",{className:"text-xs font-medium",children:""})]})}),i.jsxs(Ki,{align:"end",className:"min-w-[150px]",children:[Uh.map(r=>{const o=r.icon;return i.jsx(Nt,{asChild:!0,children:i.jsxs("a",{href:r.href,className:"cursor-pointer",children:[i.jsx(o,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:r.label})]})},r.href)}),i.jsx(Nt,{asChild:!0,children:i.jsxs("a",{href:"/ai/config",className:"cursor-pointer",children:[i.jsx($a,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:"AI "})]})}),i.jsxs(Nt,{className:"text-destructive focus:text-destructive cursor-pointer",onClick:n,children:[i.jsx(Da,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:""})]})]})]})]})})}function Qh({initialFolders:e=[],initialFiles:t=[]}){const[n,r]=l.useState(e),[o,s]=l.useState(t),[a,c]=l.useState(null),[u,f]=l.useState(!0),[d,p]=l.useState(!0),[m,h]=l.useState(!1),y=l.useRef(null),{toast:g}=Nn(),b=async()=>{try{const D=await(await fetch("/api/folders")).json();r(D.folders||[])}catch(N){console.error(":",N)}},w=async(N=null)=>{try{p(!0);const D=N?`/api/files?folderId=${N}`:"/api/files?folderId=null",R=await(await fetch(D)).json();s(R.files||[])}catch(D){console.error(":",D),g({title:"",description:"",variant:"destructive"})}finally{p(!1)}};l.useEffect(()=>{b();const N=sessionStorage.getItem("lastSelectedFolderId");N&&(c(N),sessionStorage.removeItem("lastSelectedFolderId")),w(N)},[]),l.useEffect(()=>{w(a)},[a]);const P=async()=>{const N=prompt(":");if(N)try{if((await fetch("/api/folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N,parentId:a})})).ok)g({title:"",description:` "${N}" `}),b();else throw new Error("")}catch{g({title:"",description:"",variant:"destructive"})}},x=async N=>{try{if((await fetch(`/api/folders/${N}`,{method:"DELETE"})).ok)g({title:"",description:""}),a===N&&c(null),b();else throw new Error("")}catch{g({title:"",description:"",variant:"destructive"})}},v=async N=>{if(confirm(""))try{if((await fetch(`/api/files/${N}`,{method:"DELETE"})).ok)g({title:"",description:""}),w(a);else throw new Error("")}catch{g({title:"",description:"",variant:"destructive"})}},E=l.useCallback(N=>{N.preventDefault(),h(!0)},[]),_=l.useCallback(N=>{N.preventDefault(),h(!1)},[]),C=l.useCallback(async N=>{console.log("[Upload] ",{name:N.name,size:N.size,type:N.type});try{const D=new FormData;D.append("file",N);const F="http://localhost:3001";console.log("[Upload] 1: ",{url:F});const R=await fetch(`${F}/upload`,{method:"POST",body:D});if(!R.ok){const U=await R.json();throw new Error(`: ${U.error||R.statusText}`)}const I=await R.json();console.log("[Upload] ",{uploadResult:I}),console.log("[Upload] 2: ");const k=await fetch("/api/save-file-meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N.name,folderId:a,serverFilename:I.data.filename,serverUrl:I.data.url,size:I.data.size,mimeType:I.data.mimetype})});if(!k.ok){const U=await k.json();throw new Error(`: ${U.error||k.statusText}`)}const $=await k.json();console.log("[Upload] ",{metaResult:$}),g({title:"",description:`${N.name} `})}catch(D){console.error("[Upload] ",{error:D,fileName:N.name}),g({title:"",description:`${N.name} : ${D instanceof Error?D.message:""}`,variant:"destructive"})}},[a,g]),T=l.useCallback(async N=>{N.preventDefault(),h(!1);const D=Array.from(N.dataTransfer.files);console.log("[Upload] handleDrop ",{filesCount:D.length,selectedFolderId:a});const F=D.filter(R=>R.type==="application/pdf"||R.type.includes("excel")||R.type.includes("spreadsheet"));if(console.log("[Upload] ",{total:D.length,supportedFiles:F.length}),F.length===0){console.warn("[Upload] "),g({title:"",description:"PDFExcel",variant:"destructive"});return}for(const R of F)await C(R);w(a)},[a,g,C,w]);l.useCallback(async N=>{const D=N.target.files;if(console.log("[Upload] handleFileSelect ",{filesCount:D?.length,selectedFolderId:a}),!D||D.length===0)return;const F=Array.from(D).filter(R=>R.type==="application/pdf"||R.type.includes("excel")||R.type.includes("spreadsheet"));if(console.log("[Upload] ",{total:D.length,supportedFiles:F.length}),F.length===0){console.warn("[Upload] "),g({title:"",description:"PDFExcel",variant:"destructive"});return}for(const R of F)await C(R);y.current&&(y.current.value=""),w(a)},[a,g,C,w]);const j=go(n);return i.jsxs("div",{className:"flex min-h-screen bg-background",children:[i.jsx("aside",{className:`
          fixed inset-y-0 left-0 z-50
          w-64
          bg-card border-r transform transition-transform duration-200 ease-in-out
          ${u?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0 lg:static lg:flex-shrink-0
        `,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4 border-b",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Et,{className:"h-5 w-5 text-blue-500"}),i.jsx("h2",{className:"font-semibold text-base md:text-lg",children:""})]}),i.jsx(oe,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>f(!1),children:i.jsx(En,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:i.jsx(xu,{folders:j,selectedFolderId:a,onFolderSelect:c,onFolderDelete:x})}),i.jsxs("div",{className:"border-t p-3 space-y-2 bg-muted/30",children:[i.jsxs(oe,{variant:"outline",size:"sm",className:"w-full justify-start min-h-[44px]",onClick:P,children:[i.jsx(Et,{className:"h-4 w-4 mr-2"}),""]}),i.jsx(Fr,{folderId:a,onUploadComplete:()=>w(a),compact:!0})]})]})}),i.jsxs("main",{className:"flex-1 w-full min-w-0 pb-16 md:pb-0",children:[i.jsx("header",{className:"bg-card border-b px-4 md:px-6 py-3 md:py-4",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[i.jsx(oe,{variant:"ghost",size:"icon",className:"lg:hidden min-h-[44px] min-w-[44px]",onClick:()=>f(!0),children:i.jsx(no,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:a?String(n.find(N=>N.id===a)?.name??""):""}),i.jsxs("span",{className:"text-xs md:text-sm text-muted-foreground",children:[o.length," "]})]})]})})}),i.jsx("div",{className:"p-4 md:p-6 flex-1",onDragOver:E,onDragLeave:_,onDrop:T,children:d?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"..."})]}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:""}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:""}),i.jsx(Fr,{folderId:a,onUploadComplete:()=>w(a)})]}):i.jsxs(i.Fragment,{children:[m&&i.jsx("div",{className:"fixed inset-0 bg-primary/10 z-50 flex items-center justify-center pointer-events-none",children:i.jsxs("div",{className:"bg-background border-2 border-primary border-dashed rounded-lg p-8 md:p-12 mx-4",children:[i.jsx(ot,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto mb-4 text-primary"}),i.jsx("p",{className:"text-base md:text-lg font-medium text-center",children:""})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:o.map(N=>i.jsx(Tu,{file:N,onDelete:v,onProcessed:()=>w(a)},N.id))})]})})]}),i.jsx(Wh,{}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>f(!1)})]})}export{Qh as default};
