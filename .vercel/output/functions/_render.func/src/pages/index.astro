---
import Layout from '../layouts/Layout.astro';
import Dashboard from '../components/islands/Dashboard';
import { db } from '../db';
import { folders, files } from '../db/schema';
import { isNull } from 'drizzle-orm';

// 服务端预加载数据
const initialFolders = await db.select().from(folders);
const initialFiles = await db.select().from(files).where(isNull(files.folderId));
---
<Layout title="投后文档管理">
  <Dashboard
    initialFolders={initialFolders}
    initialFiles={initialFiles}
    client:load
  />
</Layout>
